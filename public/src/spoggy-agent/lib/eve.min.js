!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("ws"),require("distribus"),require("http")):"function"==typeof define&&define.amd?define(["ws","distribus","http"],e):"object"==typeof exports?exports.eve=e(require("ws"),require("distribus"),require("http")):t.eve=e(t.ws,t.distribus,t.http)}(this,function(t,e,r){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){e.Agent=n(1),e.ServiceManager=n(14),e.TransportManager=n(55),e.module={BabbleModule:n(56),PatternModule:n(99),RequestModule:n(100),RPCModule:n(101)},e.transport={Transport:n(102),AMQPTransport:n(103),DistribusTransport:n(106),HTTPTransport:n(109),LocalTransport:n(112),PubNubTransport:n(114),WebSocketTransport:n(116),connection:{Connection:n(105),AMQPConnection:n(104),DistribusConnection:n(108),HTTPConnection:n(111),LocalConnection:n(113),PubNubConnection:n(115),WebSocketConnection:n(122)}},e.hypertimer=n(16),e.util=n(13),e.Agent.registerModule(e.module.BabbleModule),e.Agent.registerModule(e.module.PatternModule),e.Agent.registerModule(e.module.RequestModule),e.Agent.registerModule(e.module.RPCModule),e.TransportManager.registerType(e.transport.AMQPTransport),e.TransportManager.registerType(e.transport.DistribusTransport),e.TransportManager.registerType(e.transport.HTTPTransport),e.TransportManager.registerType(e.transport.LocalTransport),e.TransportManager.registerType(e.transport.PubNubTransport),e.TransportManager.registerType(e.transport.WebSocketTransport),e.system=new e.ServiceManager,e.system.transports.add(new e.transport.LocalTransport),e.Agent.getTransportById=function(t){return e.system.transports.get(t)}},function(t,e,n){"use strict";function r(t){this.id=t?t.toString():s(),this.connections=[],this.defaultConnection=null,this.ready=i.resolve([])}function o(t){var e=r.modules[t];if(!e)throw new Error('Unknown module "'+t+'". Choose from: '+Object.keys(r.modules).map(JSON.stringify).join(", "));return e}var i=n(2),s=n(12),c=n(13);r.modules={},r.registerModule=function(t){var e=t.prototype.type;if("function"!=typeof t)throw new Error("Constructor function expected");if(!e)throw new Error('Field "prototype.type" missing in transport constructor');if(e in r.modules&&r.modules[e]!==t)throw new Error('Module of type "'+e+'" already exists');r.modules[e]=t},r.getTransportById=function(t){throw new Error('Transport with id "'+t+'" not found')},r.prototype.extend=function(t,e){if(Array.isArray(t)){var n=[].concat(t);n.sort(function(t,e){return"pattern"==t?-1:"pattern"==e?1:0});for(var r=0;r<n.length;r++)this.extend(n[r],e)}else{var i=o(t),s=new i(this,e),c=s.mixin(),u=this;Object.keys(c).forEach(function(t){if(void 0!==u[t]&&"_receive"!==t)throw new Error('Conflict: agent already has a property "'+prop+'"')}),Object.keys(c).forEach(function(t){u[t]=c[t]})}return this},r.prototype.loadModule=function(t,e,n){var r=void 0!==e?Object.create(e):{};r.extend=!1;var i=o(t),s=new i(this,e,n),c=s.mixin();return this._receive=c._receive,s},r.prototype.send=function(t,e){var n=t.indexOf("://");if(-1!==n){var r=c.parseUrl(t);return"http"==r.protocol||"ws"==r.protocol||"https"==r.protocol?this._sendByProtocol(r.protocol,t,e):this._sendByNetworkId(r.domain,r.path,e)}var o=t.indexOf("@");if(-1!=o){var s=t.substring(0,o),u=t.substring(o+1);return this._sendByTransportId(u,s,e)}var a=this.defaultConnection;return a?a.send(t,e):i.reject(new Error("No transport found"))},r.prototype._sendByNetworkId=function(t,e,n){for(var r=0;r<this.connections.length;r++){var o=this.connections[r];if(o.transport.networkId==t)return o.send(e,n)}return i.reject(new Error('No transport found with networkId "'+t+'"'))},r.prototype._sendByProtocol=function(t,e,n){t="https"==t?"http":t;for(var r=0;r<this.connections.length;r++){var o=this.connections[r];if(o.transport.type==t)return o.send(e,n)}return i.reject(new Error('No transport found for protocol "'+t+'"'))},r.prototype._sendByTransportId=function(t,e,n){for(var r=0;r<this.connections.length;r++){var o=this.connections[r];if(o.transport.id==t)return o.send(e,n)}return i.reject(new Error('No transport found with id "'+t+'"'))},r.prototype.receive=function(t,e){},r.prototype._receive=function(t,e){return this.receive(t,e)},r.prototype.connect=function(t,e){if(Array.isArray(t)){var n=this;return t.map(function(t){return n._connect(t,e)})}return"string"==typeof t?this._connect(r.getTransportById(t),e):this._connect(t,e)},r.prototype._connect=function(t,e){var n=this,r=function(t,e){return n._receive(t,e)},o=t.connect(e||this.id,r);if(this.connections.push(o),this.defaultConnection){if(t["default"]){if(this.defaultConnection["default"])throw new Error("Cannot connect to a second default transport");this.defaultConnection=o}}else this.defaultConnection=o;return this._updateReady(),o},r.prototype.disconnect=function(t){var e,n;if(t){if(Array.isArray(t))for(e=0;e<this.connections.length;)n=this.connections[e],-1!==t.indexOf(n.transport)?this._disconnect(n):e++;else if("string"==typeof t)this.disconnect(r.getTransportById(t));else for(e=0;e<this.connections.length;e++)if(n=this.connections[e],n.transport===t){this._disconnect(n);break}}else for(;n=this.connections[0];)this._disconnect(n)},r.prototype._disconnect=function(t){var e=this.connections.indexOf(t);-1!==e&&(t.close(),this.connections.splice(e,1),this.defaultConnection===t&&(this.defaultConnection=this.connections[this.connections.length-1]||null)),this._updateReady()},r.prototype._updateReady=function(){this.ready=i.all(this.connections.map(function(t){return t.ready}))},t.exports=r},function(t,e,n){"use strict";t.exports=n(3)},function(t,e,n){"use strict";t.exports=n(4),n(6),n(7),n(8),n(9),n(11)},function(t,e,n){"use strict";function r(){}function o(t){try{return t.then}catch(e){return g=e,m}}function i(t,e){try{return t(e)}catch(n){return g=n,m}}function s(t,e,n){try{t(e,n)}catch(r){return g=r,m}}function c(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._45=0,this._81=0,this._65=null,this._54=null,t!==r&&y(t,this)}function u(t,e,n){return new t.constructor(function(o,i){var s=new c(r);s.then(o,i),a(t,new d(e,n,s))})}function a(t,e){for(;3===t._81;)t=t._65;return c._10&&c._10(t),0===t._81?0===t._45?(t._45=1,void(t._54=e)):1===t._45?(t._45=2,void(t._54=[t._54,e])):void t._54.push(e):void f(t,e)}function f(t,e){v(function(){var n=1===t._81?e.onFulfilled:e.onRejected;if(null===n)return void(1===t._81?h(e.promise,t._65):l(e.promise,t._65));var r=i(n,t._65);r===m?l(e.promise,g):h(e.promise,r)})}function h(t,e){if(e===t)return l(t,new TypeError("A promise cannot be resolved with itself."));if(e&&("object"==typeof e||"function"==typeof e)){var n=o(e);if(n===m)return l(t,g);if(n===t.then&&e instanceof c)return t._81=3,t._65=e,void p(t);if("function"==typeof n)return void y(n.bind(e),t)}t._81=1,t._65=e,p(t)}function l(t,e){t._81=2,t._65=e,c._97&&c._97(t,e),p(t)}function p(t){if(1===t._45&&(a(t,t._54),t._54=null),2===t._45){for(var e=0;e<t._54.length;e++)a(t,t._54[e]);t._54=null}}function d(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function y(t,e){var n=!1,r=s(t,function(t){n||(n=!0,h(e,t))},function(t){n||(n=!0,l(e,t))});n||r!==m||(n=!0,l(e,g))}var v=n(5),g=null,m={};t.exports=c,c._10=null,c._97=null,c._61=r,c.prototype.then=function(t,e){if(this.constructor!==c)return u(this,t,e);var n=new c(r);return a(this,new d(t,e,n)),n}},function(t,e){(function(e){"use strict";function n(t){c.length||(s(),u=!0),c[c.length]=t}function r(){for(;a<c.length;){var t=a;if(a+=1,c[t].call(),a>f){for(var e=0,n=c.length-a;n>e;e++)c[e]=c[e+a];c.length-=a,a=0}}c.length=0,a=0,u=!1}function o(t){var e=1,n=new h(t),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){e=-e,r.data=e}}function i(t){return function(){function e(){clearTimeout(n),clearInterval(r),t()}var n=setTimeout(e,0),r=setInterval(e,50)}}t.exports=n;var s,c=[],u=!1,a=0,f=1024,h=e.MutationObserver||e.WebKitMutationObserver;s="function"==typeof h?o(r):i(r),n.requestFlush=s,n.makeRequestCallFromTimer=i}).call(e,function(){return this}())},function(t,e,n){"use strict";var r=n(4);t.exports=r,r.prototype.done=function(t,e){var n=arguments.length?this.then.apply(this,arguments):this;n.then(null,function(t){setTimeout(function(){throw t},0)})}},function(t,e,n){"use strict";var r=n(4);t.exports=r,r.prototype["finally"]=function(t){return this.then(function(e){return r.resolve(t()).then(function(){return e})},function(e){return r.resolve(t()).then(function(){throw e})})}},function(t,e,n){"use strict";function r(t){var e=new o(o._61);return e._81=1,e._65=t,e}var o=n(4);t.exports=o;var i=r(!0),s=r(!1),c=r(null),u=r(void 0),a=r(0),f=r("");o.resolve=function(t){if(t instanceof o)return t;if(null===t)return c;if(void 0===t)return u;if(t===!0)return i;if(t===!1)return s;if(0===t)return a;if(""===t)return f;if("object"==typeof t||"function"==typeof t)try{var e=t.then;if("function"==typeof e)return new o(e.bind(t))}catch(n){return new o(function(t,e){e(n)})}return r(t)},o.all=function(t){var e=Array.prototype.slice.call(t);return new o(function(t,n){function r(s,c){if(c&&("object"==typeof c||"function"==typeof c)){if(c instanceof o&&c.then===o.prototype.then){for(;3===c._81;)c=c._65;return 1===c._81?r(s,c._65):(2===c._81&&n(c._65),void c.then(function(t){r(s,t)},n))}var u=c.then;if("function"==typeof u){var a=new o(u.bind(c));return void a.then(function(t){r(s,t)},n)}}e[s]=c,0===--i&&t(e)}if(0===e.length)return t([]);for(var i=e.length,s=0;s<e.length;s++)r(s,e[s])})},o.reject=function(t){return new o(function(e,n){n(t)})},o.race=function(t){return new o(function(e,n){t.forEach(function(t){o.resolve(t).then(e,n)})})},o.prototype["catch"]=function(t){return this.then(null,t)}},function(t,e,n){"use strict";function r(t,e){for(var n=[],r=0;e>r;r++)n.push("a"+r);var o=["return function ("+n.join(",")+") {","var self = this;","return new Promise(function (rs, rj) {","var res = fn.call(",["self"].concat(n).concat([c]).join(","),");","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],o)(i,t)}function o(t){for(var e=Math.max(t.length-1,3),n=[],r=0;e>r;r++)n.push("a"+r);var o=["return function ("+n.join(",")+") {","var self = this;","var args;","var argLength = arguments.length;","if (arguments.length > "+e+") {","args = new Array(arguments.length + 1);","for (var i = 0; i < arguments.length; i++) {","args[i] = arguments[i];","}","}","return new Promise(function (rs, rj) {","var cb = "+c+";","var res;","switch (argLength) {",n.concat(["extra"]).map(function(t,e){return"case "+e+":res = fn.call("+["self"].concat(n.slice(0,e)).concat("cb").join(",")+");break;"}).join(""),"default:","args[argLength] = cb;","res = fn.apply(self, args);","}","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],o)(i,t)}var i=n(4),s=n(10);t.exports=i,i.denodeify=function(t,e){return"number"==typeof e&&e!==1/0?r(t,e):o(t)};var c="function (err, res) {if (err) { rj(err); } else { rs(res); }}";i.nodeify=function(t){return function(){var e=Array.prototype.slice.call(arguments),n="function"==typeof e[e.length-1]?e.pop():null,r=this;try{return t.apply(this,arguments).nodeify(n,r)}catch(o){if(null===n||"undefined"==typeof n)return new i(function(t,e){e(o)});s(function(){n.call(r,o)})}}},i.prototype.nodeify=function(t,e){return"function"!=typeof t?this:void this.then(function(n){s(function(){t.call(e,null,n)})},function(n){s(function(){t.call(e,n)})})}},function(t,e,n){"use strict";function r(){if(u.length)throw u.shift()}function o(t){var e;e=c.length?c.pop():new i,e.task=t,s(e)}function i(){this.task=null}var s=n(5),c=[],u=[],a=s.makeRequestCallFromTimer(r);t.exports=o,i.prototype.call=function(){try{this.task.call()}catch(t){o.onerror?o.onerror(t):(u.push(t),a())}finally{this.task=null,c[c.length]=this}}},function(t,e,n){"use strict";var r=n(4);t.exports=r,r.enableSynchronous=function(){r.prototype.isPending=function(){return 0==this.getState()},r.prototype.isFulfilled=function(){return 1==this.getState()},r.prototype.isRejected=function(){return 2==this.getState()},r.prototype.getValue=function(){if(3===this._81)return this._65.getValue();if(!this.isFulfilled())throw new Error("Cannot get a value of an unfulfilled promise.");return this._65},r.prototype.getReason=function(){if(3===this._81)return this._65.getReason();if(!this.isRejected())throw new Error("Cannot get a rejection reason of a non-rejected promise.");return this._65},r.prototype.getState=function(){return 3===this._81?this._65.getState():-1===this._81||-2===this._81?0:this._81}},r.disableSynchronous=function(){r.prototype.isPending=void 0,r.prototype.isFulfilled=void 0,r.prototype.isRejected=void 0,r.prototype.getValue=void 0,r.prototype.getReason=void 0,r.prototype.getState=void 0}},function(t,e){e=t.exports=function(){for(var t,n="",r=0;32>r;r++)t=16*e.random()|0,r>4&&21>r&&!(r%4)&&(n+="-"),n+=(12===r?4:16===r?3&t|8:t).toString(16);return n};var n=/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/;e.isUUID=function(t){return n.test(t)},e.random=function(){return Math.random()}},function(t,e){"use strict";e.isPromise=function(t){return t&&"function"==typeof t.then&&"function"==typeof t["catch"]},e.parseUrl=function(t){var e=/^([A-z]+):\/\/([^\/]+)(\/(.*)$|$)/.exec(t);return e?{protocol:e[1],domain:e[2],path:e[4]}:null},e.normalizeURL=function(t){return"/"==t[t.length-1]?t.substring(0,t.length-1):t}},function(t,e,n){"use strict";function r(t){this.transports=new s,this.timer=i(),this.random=Math.random,this.init(t)}var o=n(15),i=n(16),s=n(55),c={transports:!0,timer:!0,random:!0};r.prototype.init=function(t){if(this.transports.clear(),t){if(t.transports&&this.transports.load(t.transports),t.timer&&this.timer.config(t.timer),t.random)if(t.random.deterministic){var e=t.random.seed||"random seed";this.random=o(e,t.random)}else this.random=Math.random;for(var n in t)t.hasOwnProperty(n)&&!c[n]&&console.log('WARNING: Unknown configuration option "'+n+'"')}},r.prototype.clear=function(){this.transports.clear()},t.exports=r},function(t,e){(function(e){"use strict";function n(t){var e,n=t.length,r=this,o=0,i=r.i=r.j=0,s=r.S=[];for(n||(t=[n++]);c>o;)s[o]=o++;for(o=0;c>o;o++)s[o]=s[i=y&i+t[o%n]+(e=s[o])],s[i]=e;(r.g=function(t){for(var e,n=0,o=r.i,i=r.j,s=r.S;t--;)e=s[o=y&o+1],n=n*c+s[y&(s[o]=s[i=y&i+e])+(s[i]=e)];return r.i=o,r.j=i,n})(c)}function r(t,e){var n,o=[],i=(typeof t)[0];if(e&&"o"==i)for(n in t)try{o.push(r(t[n],e-1))}catch(s){}return o.length?o:"s"==i?t:t+"\x00"}function o(t,e){for(var n,r=t+"",o=0;o<r.length;)e[y&o]=y&(n^=19*e[y&o])+r.charCodeAt(o++);return s(e)}function i(t){try{return h.crypto.getRandomValues(t=new Uint8Array(c)),s(t)}catch(e){return[+new Date,h,h.navigator&&h.navigator.plugins,h.screen,s(f)]}}function s(t){return String.fromCharCode.apply(0,t)}var c=256,u=6,a=52,f=[],h="undefined"==typeof e?window:e,l=Math.pow(c,u),p=Math.pow(2,a),d=2*p,y=c-1,v=Math.random;t.exports=function(e,a){if(a&&a.global===!0)return a.global=!1,Math.random=t.exports(e,a),a.global=!0,Math.random;var h=a&&a.entropy||!1,y=[],v=(o(r(h?[e,s(f)]:0 in arguments?e:i(),3),y),new n(y));return o(s(v.S),f),function(){for(var t=v.g(u),e=l,n=0;p>t;)t=(t+n)*c,e*=c,n=v.g(1);for(;t>=d;)t/=2,e/=2,n>>>=1;return(t+n)/e}},t.exports.resetGlobal=function(){Math.random=v},o(Math.random(),f)}).call(e,function(){return this}())},function(t,e,n){t.exports=n(17)},function(t,e,n){function r(t){function e(){return{paced:g,rate:m,deterministic:_,time:w,master:b,port:E}}function n(t){if(P||t.master)for(var e in t)if("master"!==e&&"slave"!==e)throw new Error('Cannot apply configuration option "'+e+'", timer is configured as slave.')}function r(t){function n(t){var n=e();r(t);var o=e();I.emit("config",o,n)}if("deterministic"in t&&(_=t.deterministic?!0:!1),"paced"in t&&(g=t.paced?!0:!1),"time"in t&&(S=v(t.time),k=u.systemNow(),f(S),w=new Date(S).toISOString()),"rate"in t){var o=Number(t.rate);if(isNaN(o)||0>=o)throw new TypeError("Invalid rate "+JSON.stringify(t.rate)+". Rate must be a positive number");S=I.now(),k=u.systemNow(),m=o}"master"in t&&(P&&(P.destroy(),P=null),b=t.master,null!=t.master&&(P=c(t.master),P.on("change",function(t){n({time:t})}),P.on("config",function(t){n(t)}),P.on("error",function(t){I.emit("error",t)}))),"port"in t&&(C&&(C.destroy(),C=null),E=t.port,t.port&&(C=s(I.now,I.config,t.port),C.on("error",function(t){I.emit("error",t)}))),y(),C&&C.broadcastConfig()}function f(t){for(var e=0;e<O.length;e++){var n=O[e];n.type===a.INTERVAL&&h(n,t)}}function h(t,e){t.occurrence=Math.round((e-t.firstTime)/t.interval),t.time=t.firstTime+t.occurrence*t.interval}function l(t){if(O.length>0){for(var e=O.length-1;e>=0&&O[e].time>t.time;)e--;O.splice(e+1,0,t)}else O.push(t)}function p(t,e){function n(){t.type===a.INTERVAL&&A[t.id]&&(t.occurrence++,t.time=t.firstTime+t.occurrence*t.interval,l(t)),delete A[t.id],e&&e()}A[t.id]=t;try{0==t.callback.length?(t.callback(),n()):t.callback(n)}catch(r){i(I,"error")?I.emit("error",r):console.log("Error",r),n()}}function d(t){for(var e=0;e<O.length&&(O[e].time<=t||!isFinite(O[e].time));)e++;var n=O.splice(0,e);return 0==_&&u.shuffle(n),n}function y(){function t(){function t(){var n=e.shift();n?p(n,t):y()}g||(S=n>S&&isFinite(n)?n:S);var e=d(n);g?(e.forEach(function(t){p(t)}),y()):t()}if(g||!(Object.keys(A).length>0)){var e=O[0];if(T&&(clearTimeout(T),T=null),x&&e){var n=e.time,r=n-I.now(),o=g?r/m:0;T=setTimeout(t,Math.round(o))}}}function v(t){var e="number"==typeof t?t:t instanceof Date?t.valueOf():new Date(t).valueOf();if(isNaN(e))throw new TypeError("Invalid date "+JSON.stringify(t)+". Date, number, or ISOString expected");return e}var g=!0,m=1,_=!0,w=null,b=null,E=null,x=!1,k=null,S=u.systemNow(),O=[],A={},T=null,B=0,C=null,P=null,I=o({});return I.config=function(t){return t&&(n(t),r(t)),e()},I.now=function(){if(g){if(x){var t=u.systemNow()-k,e=t*m;return S+e}return S}return S},I["continue"]=function(){k=u.systemNow(),x=!0,y()},I.pause=function(){S=I.now(),k=null,x=!1,y()},I.getTime=function(){return new Date(I.now())},I.valueOf=I.getTime,I.toString=function(){return I.getTime().toString()},I.setTimeout=function(t,e){var n=B++,r=I.now()+e;if(isNaN(r))throw new TypeError("delay must be a number");return l({id:n,type:a.TIMEOUT,time:r,callback:t}),y(),n},I.setTrigger=function(t,e){var n=B++,r=v(e);return l({id:n,type:a.TRIGGER,time:r,callback:t}),y(),n},I.setInterval=function(t,e,n){var r=B++,o=Number(e);if(isNaN(o))throw new TypeError("interval must be a number");(0>o||!isFinite(o))&&(o=0);var i=void 0!=n?v(n):null,s=I.now(),c=null!=i?i:s+o,u={id:r,type:a.INTERVAL,interval:o,time:c,firstTime:null!=i?i:c,occurrence:0,callback:t};return s>c&&h(u,s),l(u),y(),r},I.clearTimeout=function(t){if(A[t])return void delete A[t];for(var e=0;e<O.length;e++)if(O[e].id===t){O.splice(e,1),y();break}},I.clearTrigger=I.clearTimeout,I.clearInterval=I.clearTimeout,I.list=function(){return O.map(function(t){return t.id})},I.clear=function(){A={},O=[],y()},I.destroy=function(){I.clear(),P&&P.destroy(),C&&C.destroy()},Object.defineProperty(I,"running",{get:function(){return x}}),I.config(t),I["continue"](),I}var o=n(18),i=n(33),s=n(35).createMaster,c=n(51).createSlave,u=n(54),a={TIMEOUT:0,INTERVAL:1,TRIGGER:2};t.exports=r},function(t,e,n){"use strict";var r,o,i,s,c,u,a,f=n(19),h=n(32),l=Function.prototype.apply,p=Function.prototype.call,d=Object.create,y=Object.defineProperty,v=Object.defineProperties,g=Object.prototype.hasOwnProperty,m={configurable:!0,enumerable:!1,writable:!0};r=function(t,e){var n;return h(e),g.call(this,"__ee__")?n=this.__ee__:(n=m.value=d(null),y(this,"__ee__",m),m.value=null),n[t]?"object"==typeof n[t]?n[t].push(e):n[t]=[n[t],e]:n[t]=e,this},o=function(t,e){var n,o;return h(e),o=this,r.call(this,t,n=function(){i.call(o,t,n),l.call(e,this,arguments)}),n.__eeOnceListener__=e,this},i=function(t,e){var n,r,o,i;if(h(e),!g.call(this,"__ee__"))return this;if(n=this.__ee__,!n[t])return this;if(r=n[t],"object"==typeof r)for(i=0;o=r[i];++i)(o===e||o.__eeOnceListener__===e)&&(2===r.length?n[t]=r[i?0:1]:r.splice(i,1));else(r===e||r.__eeOnceListener__===e)&&delete n[t];return this},s=function(t){var e,n,r,o,i;if(g.call(this,"__ee__")&&(o=this.__ee__[t]))if("object"==typeof o){for(n=arguments.length,i=new Array(n-1),e=1;n>e;++e)i[e-1]=arguments[e];for(o=o.slice(),e=0;r=o[e];++e)l.call(r,this,i)}else switch(arguments.length){case 1:p.call(o,this);break;case 2:p.call(o,this,arguments[1]);break;case 3:p.call(o,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,i=new Array(n-1),e=1;n>e;++e)i[e-1]=arguments[e];l.call(o,this,i)}},c={on:r,once:o,off:i,emit:s},u={on:f(r),once:f(o),off:f(i),emit:f(s)},a=v({},u),t.exports=e=function(t){return null==t?d(a):v(Object(t),u)},e.methods=c},function(t,e,n){"use strict";var r,o=n(20),i=n(27),s=n(28),c=n(29);r=t.exports=function(t,e){var n,r,s,u,a;return arguments.length<2||"string"!=typeof t?(u=e,e=t,t=null):u=arguments[2],null==t?(n=s=!0,r=!1):(n=c.call(t,"c"),r=c.call(t,"e"),s=c.call(t,"w")),a={value:e,configurable:n,enumerable:r,writable:s},u?o(i(u),a):a},r.gs=function(t,e,n){var r,u,a,f;return"string"!=typeof t?(a=n,n=e,e=t,t=null):a=arguments[3],null==e?e=void 0:s(e)?null==n?n=void 0:s(n)||(a=n,n=void 0):(a=e,e=n=void 0),null==t?(r=!0,u=!1):(r=c.call(t,"c"),u=c.call(t,"e")),f={get:e,set:n,configurable:r,enumerable:u},a?o(i(a),f):f}},function(t,e,n){"use strict";t.exports=n(21)()?Object.assign:n(22)},function(t,e){"use strict";t.exports=function(){var t,e=Object.assign;return"function"!=typeof e?!1:(t={foo:"raz"},e(t,{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}},function(t,e,n){"use strict";var r=n(23),o=n(26),i=Math.max;t.exports=function(t,e){var n,s,c,u=i(arguments.length,2);for(t=Object(o(t)),c=function(r){try{t[r]=e[r]}catch(o){n||(n=o)}},s=1;u>s;++s)e=arguments[s],r(e).forEach(c);if(void 0!==n)throw n;return t}},function(t,e,n){"use strict";t.exports=n(24)()?Object.keys:n(25)},function(t,e){"use strict";t.exports=function(){try{return Object.keys("primitive"),!0}catch(t){return!1}}},function(t,e){"use strict";var n=Object.keys;t.exports=function(t){return n(null==t?t:Object(t))}},function(t,e){"use strict";t.exports=function(t){if(null==t)throw new TypeError("Cannot use null or undefined");return t}},function(t,e){"use strict";var n=Array.prototype.forEach,r=Object.create,o=function(t,e){var n;for(n in t)e[n]=t[n]};t.exports=function(t){var e=r(null);return n.call(arguments,function(t){null!=t&&o(Object(t),e)}),e}},function(t,e){"use strict";t.exports=function(t){return"function"==typeof t}},function(t,e,n){"use strict";t.exports=n(30)()?String.prototype.contains:n(31)},function(t,e){"use strict";var n="razdwatrzy";t.exports=function(){return"function"!=typeof n.contains?!1:n.contains("dwa")===!0&&n.contains("foo")===!1}},function(t,e){"use strict";var n=String.prototype.indexOf;t.exports=function(t){return n.call(this,t,arguments[1])>-1}},function(t,e){"use strict";t.exports=function(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return t}},function(t,e,n){"use strict";var r=n(34),o=n(26),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e;return o(t),e=arguments[1],arguments.length>1?i.call(t,"__ee__")&&Boolean(t.__ee__[e]):t.hasOwnProperty("__ee__")&&!r(t.__ee__)}},function(t,e,n){"use strict";var r=n(26),o=Object.prototype.propertyIsEnumerable;t.exports=function(t){var e;r(t);for(e in t)if(o.call(t,e))return!1;return!0}},function(t,e,n){var r=n(36),o=n(38),i=n(47)("hypertimer:master");e.createMaster=function(t,e,n){function s(){var t=e();return delete t.time,delete t.master,delete t.port,t}var c=new r.Server({port:n});return c.on("connection",function(e){i("new connection");var n=o(e);n.on("time",function(e,n){var r=t();n(r),i("send time "+new Date(r).toISOString())});var r=s();i("send config",r),n.send("config",r),e.emitter=n}),c.broadcast=function(t,e){i("broadcast",t,e),c.clients.forEach(function(n){n.emitter.send(t,e)})},c.broadcastConfig=function(){c.broadcast("config",s())},c.destroy=function(){c.close(),i("destroyed")},i("listening at ws://localhost:"+n),c}},function(t,e,n){t.exports="undefined"==typeof window||"undefined"==typeof window.WebSocket?n(37):window.WebSocket},function(e,n){e.exports=t},function(t,e,n){var r=n(18),o=n(39),i=n(47)("hypertimer:socket"),s=6e4;t.exports=function(t){function e(e,n){var r={event:e,data:n};i("send",r),t.send(JSON.stringify(r))}function n(e,n){return new o(function(r,o){var u=c(),f={event:e,id:u,data:n};a[u]={resolve:r,reject:o,timeout:setTimeout(function(){delete a[u],o(new Error("Timeout"))},s)},i("request",f),t.send(JSON.stringify(f))})["catch"](function(t){console.log("ERROR",t)})}function c(){return f++}var u=r({socket:t,send:e,request:n});t.onmessage=function(e){var n=e.data,r=JSON.parse(n);i("receive",r);var o=a[r.id];o?(clearTimeout(o.timeout),delete a[r.id],o.resolve(r.data)):"id"in r?u.emit(r.event,r.data,function(e){var n={id:r.id,data:e};t.readyState===t.OPEN||t.readyState===t.CONNECTING?(i("reply",n),t.send(JSON.stringify(n))):i("cancel reply",n,"(socket is closed)")}):u.emit(r.event,r.data)};var a={},f=0;return u}},function(t,e,n){t.exports="undefined"==typeof window||"undefined"==typeof window.Promise?n(40):window.Promise},function(t,e,n){"use strict";t.exports=n(41)},function(t,e,n){"use strict";t.exports=n(42),n(43),n(44),n(45),n(46)},function(t,e,n){"use strict";function r(){}function o(t){try{return t.then}catch(e){return v=e,g}}function i(t,e){try{return t(e)}catch(n){return v=n,g}}function s(t,e,n){try{t(e,n)}catch(r){return v=r,g}}function c(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._37=0,this._12=null,this._59=[],t!==r&&d(t,this)}function u(t,e,n){return new t.constructor(function(o,i){var s=new c(r);s.then(o,i),a(t,new p(e,n,s))})}function a(t,e){for(;3===t._37;)t=t._12;return 0===t._37?void t._59.push(e):void y(function(){var n=1===t._37?e.onFulfilled:e.onRejected;if(null===n)return void(1===t._37?f(e.promise,t._12):h(e.promise,t._12));var r=i(n,t._12);r===g?h(e.promise,v):f(e.promise,r)})}function f(t,e){if(e===t)return h(t,new TypeError("A promise cannot be resolved with itself."));if(e&&("object"==typeof e||"function"==typeof e)){var n=o(e);if(n===g)return h(t,v);if(n===t.then&&e instanceof c)return t._37=3,t._12=e,void l(t);if("function"==typeof n)return void d(n.bind(e),t)}t._37=1,t._12=e,l(t)}function h(t,e){t._37=2,t._12=e,l(t)}function l(t){for(var e=0;e<t._59.length;e++)a(t,t._59[e]);t._59=null}function p(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function d(t,e){var n=!1,r=s(t,function(t){n||(n=!0,f(e,t))},function(t){n||(n=!0,h(e,t))});n||r!==g||(n=!0,h(e,v))}var y=n(5),v=null,g={};t.exports=c,c._99=r,c.prototype.then=function(t,e){if(this.constructor!==c)return u(this,t,e);var n=new c(r);return a(this,new p(t,e,n)),n}},function(t,e,n){"use strict";var r=n(42);t.exports=r,r.prototype.done=function(t,e){var n=arguments.length?this.then.apply(this,arguments):this;n.then(null,function(t){setTimeout(function(){throw t},0)})}},function(t,e,n){"use strict";var r=n(42);t.exports=r,r.prototype["finally"]=function(t){return this.then(function(e){return r.resolve(t()).then(function(){return e})},function(e){return r.resolve(t()).then(function(){throw e})})}},function(t,e,n){"use strict";function r(t){var e=new o(o._99);return e._37=1,e._12=t,e}var o=n(42);t.exports=o;var i=r(!0),s=r(!1),c=r(null),u=r(void 0),a=r(0),f=r("");o.resolve=function(t){if(t instanceof o)return t;if(null===t)return c;if(void 0===t)return u;if(t===!0)return i;if(t===!1)return s;if(0===t)return a;if(""===t)return f;if("object"==typeof t||"function"==typeof t)try{var e=t.then;if("function"==typeof e)return new o(e.bind(t))}catch(n){return new o(function(t,e){e(n)})}return r(t)},o.all=function(t){var e=Array.prototype.slice.call(t);return new o(function(t,n){function r(s,c){if(c&&("object"==typeof c||"function"==typeof c)){if(c instanceof o&&c.then===o.prototype.then){for(;3===c._37;)c=c._12;return 1===c._37?r(s,c._12):(2===c._37&&n(c._12),void c.then(function(t){r(s,t)},n))}var u=c.then;if("function"==typeof u){var a=new o(u.bind(c));return void a.then(function(t){r(s,t)},n)}}e[s]=c,0===--i&&t(e)}if(0===e.length)return t([]);for(var i=e.length,s=0;s<e.length;s++)r(s,e[s])})},o.reject=function(t){return new o(function(e,n){n(t)})},o.race=function(t){return new o(function(e,n){t.forEach(function(t){o.resolve(t).then(e,n)})})},o.prototype["catch"]=function(t){return this.then(null,t)}},function(t,e,n){"use strict";var r=n(42),o=n(10);t.exports=r,r.denodeify=function(t,e){return e=e||1/0,function(){var n=this,o=Array.prototype.slice.call(arguments,0,e>0?e:0);return new r(function(e,r){o.push(function(t,n){t?r(t):e(n)});var i=t.apply(n,o);!i||"object"!=typeof i&&"function"!=typeof i||"function"!=typeof i.then||e(i)})}},r.nodeify=function(t){return function(){var e=Array.prototype.slice.call(arguments),n="function"==typeof e[e.length-1]?e.pop():null,i=this;try{return t.apply(this,arguments).nodeify(n,i)}catch(s){if(null===n||"undefined"==typeof n)return new r(function(t,e){e(s)});o(function(){n.call(i,s)})}}},r.prototype.nodeify=function(t,e){return"function"!=typeof t?this:void this.then(function(n){o(function(){t.call(e,null,n)})},function(n){o(function(){t.call(e,n)})})}},function(t,e,n){var r="undefined"!=typeof window?window.Debug:n(48);t.exports=r||function(){return function(){}}},function(t,e,n){function r(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function o(){var t=arguments,n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),!n)return t;var r="color: "+this.color;t=[t[0],r,"color: inherit"].concat(Array.prototype.slice.call(t,1));var o=0,i=0;return t[0].replace(/%[a-z%]/g,function(t){"%%"!==t&&(o++,"%c"===t&&(i=o))}),t.splice(i,0,r),t}function i(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(n){}}function c(){var t;try{t=e.storage.debug}catch(n){}return t}function u(){try{return window.localStorage}catch(t){}}e=t.exports=n(49),e.log=i,e.formatArgs=o,e.save=s,e.load=c,e.useColors=r,e.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:u(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],e.formatters.j=function(t){return JSON.stringify(t)},e.enable(c())},function(t,e,n){function r(){return e.colors[f++%e.colors.length]}function o(t){function n(){}function o(){var t=o,n=+new Date,i=n-(a||n);t.diff=i,t.prev=a,t.curr=n,a=n,null==t.useColors&&(t.useColors=e.useColors()),null==t.color&&t.useColors&&(t.color=r());var s=Array.prototype.slice.call(arguments);s[0]=e.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var c=0;s[0]=s[0].replace(/%([a-z%])/g,function(n,r){if("%%"===n)return n;c++;var o=e.formatters[r];if("function"==typeof o){var i=s[c];n=o.call(t,i),s.splice(c,1),c--}return n}),"function"==typeof e.formatArgs&&(s=e.formatArgs.apply(t,s));var u=o.log||e.log||console.log.bind(console);u.apply(t,s)}n.enabled=!1,o.enabled=!0;var i=e.enabled(t)?o:n;return i.namespace=t,
i}function i(t){e.save(t);for(var n=(t||"").split(/[\s,]+/),r=n.length,o=0;r>o;o++)n[o]&&(t=n[o].replace(/\*/g,".*?"),"-"===t[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))}function s(){e.enable("")}function c(t){var n,r;for(n=0,r=e.skips.length;r>n;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;r>n;n++)if(e.names[n].test(t))return!0;return!1}function u(t){return t instanceof Error?t.stack||t.message:t}e=t.exports=o,e.coerce=u,e.disable=s,e.enable=i,e.enabled=c,e.humanize=n(50),e.names=[],e.skips=[],e.formatters={};var a,f=0},function(t,e){function n(t){if(t=""+t,!(t.length>1e4)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*f;case"days":case"day":case"d":return n*a;case"hours":case"hour":case"hrs":case"hr":case"h":return n*u;case"minutes":case"minute":case"mins":case"min":case"m":return n*c;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function r(t){return t>=a?Math.round(t/a)+"d":t>=u?Math.round(t/u)+"h":t>=c?Math.round(t/c)+"m":t>=s?Math.round(t/s)+"s":t+"ms"}function o(t){return i(t,a,"day")||i(t,u,"hour")||i(t,c,"minute")||i(t,s,"second")||t+" ms"}function i(t,e,n){return e>t?void 0:1.5*e>t?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}var s=1e3,c=60*s,u=60*c,a=24*u,f=365.25*a;t.exports=function(t,e){return e=e||{},"string"==typeof t?n(t):e["long"]?o(t):r(t)}},function(t,e,n){var r=n(36),o=n(39),i=n(47)("hypertimer:slave"),s=n(38),c=n(52),u=n(53),a=36e5,f=1e3,h=5;e.createSlave=function(t){function e(){function t(){var t=null;return y?o.resolve(t):n(p).then(function(e){t=e})["catch"](function(t){console.log(t)}).then(function(){return u.wait(f)}).then(function(){return t})}return u.repeat(t,h).then(function(t){i("latencies",t);var e=t.filter(function(t){return null!==t}),n=c.median(e)+c.std(e),r=e.filter(function(t){return n>t});return r.length>0?c.mean(r):null}).then(function(t){return y?o.resolve(null):p.request("time").then(function(e){var n=e+t;return p.emit("change",n),n})})["catch"](function(t){p.emit("error",t)})}function n(t){var e=Date.now();return t.request("time").then(function(n){var r=Date.now(),o=(r-e)/2,i=n+o;return d&&(d=!1,t.emit("change",i)),o})}var l=new r(t),p=s(l),d=!0,y=!1,v=null;return l.onopen=function(){i("connected"),e(),v=setInterval(e,a)},p.destroy=function(){y=!0,clearInterval(v),v=null,l.close(),i("destroyed")},p}},function(t,e){e.compare=function(t,e){return t>e?1:e>t?-1:0},e.add=function(t,e){return t+e},e.sum=function(t){return t.reduce(e.add)},e.mean=function(t){return e.sum(t)/t.length},e.std=function(t){return Math.sqrt(e.variance(t))},e.variance=function(t){if(t.length<2)return 0;var n=e.mean(t);return t.map(function(t){return Math.pow(t-n,2)}).reduce(e.add)/(t.length-1)},e.median=function(t){if(t.length<2)return t[0];var n=t.slice().sort(e.compare);return n.length%2===0?(t[t.length/2-1]+t[t.length/2])/2:t[(t.length-1)/2]}},function(t,e,n){var r=n(39);e.wait=function(t){return new r(function(e){setTimeout(e,t)})},e.repeat=function(t,e){return new r(function(n,r){function o(){e>i?(i++,t().then(function(t){s.push(t),o()})):n(s)}var i=0,s=[];o()})},e.whilst=function(t,e){return new r(function(n,r){function o(){t()?e().then(function(){o()}):n()}o()})}},function(t,e){"function"==typeof Date.now?e.systemNow=function(){return Date.now()}:e.systemNow=function(){return(new Date).valueOf()},e.shuffle=function(t){for(var e,n,r=t.length;r;e=Math.floor(Math.random()*r),n=t[--r],t[r]=t[e],t[e]=n);return t}},function(t,e){"use strict";function n(t){this.transports=[],t&&this.load(t)}n.types={},n.registerType=function(t){var e=t.prototype.type;if("function"!=typeof t)throw new Error("Constructor function expected");if(!e)throw new Error('Field "prototype.type" missing in transport constructor');if(e in n.types&&n.types[e]!==t)throw new Error('Transport type "'+e+'" already exists');n.types[e]=t},n.prototype.add=function(t){return this.transports.push(t),t},n.prototype.load=function(t){if(Array.isArray(t))return t.map(this.load.bind(this));var e=t.type;if(!e)throw new Error('Property "type" missing');var r=n.types[e];if(!r)throw new Error('Unknown type of transport "'+e+'". Choose from: '+Object.keys(n.types).join(","));var o=new r(t);return this.transports.push(o),o},n.prototype.unload=function(t){var e;if("string"==typeof t)e=this.get(t);else if(Array.isArray(t))for(var n=0;n<t.length;n++)this.unload(t[n]);else e=t;if(e){e.close();var r=this.transports.indexOf(e);-1!==r&&this.transports.splice(r,1)}},n.prototype.get=function(t){for(var e=0;e<this.transports.length;e++){var n=this.transports[e];if(n.id===t)return n}throw new Error('Transport with id "'+t+'" not found')},n.prototype.getAll=function(){return this.transports.concat([])},n.prototype.getByType=function(t){if(t){if(!(t in n.types))throw new Error('Unknown type of transport "'+t+'". Choose from: '+Object.keys(n.types).join(","));return this.transports.filter(function(e){return e.type===t})}return[].concat(this.transports)},n.prototype.clear=function(){this.transports.forEach(function(t){t.close()}),this.transports=[]},t.exports=n},function(t,e,n){"use strict";function r(t,e){var n=o.babbler(t.id);n.connect({connect:function(t){},disconnect:function(t){},send:function(e,n){t.send(e,n)}}),this.babbler=n;var r=t._receive;this._receive=function(e,o){return n._receive(o),r.call(t,e,o)}}var o=n(57);r.prototype.type="babble",r.prototype.mixin=function(){var t=this.babbler;return{_receive:this._receive,ask:t.ask.bind(t),tell:t.tell.bind(t),listen:t.listen.bind(t),listenOnce:t.listenOnce.bind(t)}},t.exports=r},function(t,e,n){"use strict";t.exports=n(58)},function(t,e,n){"use strict";var r=n(59),o=n(95),i=n(96),s=n(93),c=n(98),u=n(97);e.babbler=function(t){return new r(t)},e.tell=function(t){return new o(t)},e.ask=function(t,n){return e.tell(t).listen(n)},e.decide=function(t,e){return new c(t,e)},e.listen=function(t){var e=new i;return t?e.then(t):e},e.then=function(t){return new s(t)},e.iif=function(t,e,n){return new u(t,e,n)},e.Babbler=r,e.block={Block:n(92),Then:n(93),Decision:n(98),IIf:n(97),Listen:n(96),Tell:n(95)},e.messagebus=n(88),e.babblify=function(t,n){var r;if(n&&void 0!==n.id)r=n.id;else{if(void 0===t.id)throw new Error('Id missing. Ensure that either actor has a property "id", or provide an id as a property in second argument params');r=t.id}["ask","tell","listen","listenOnce"].forEach(function(e){if(void 0!==t[e])throw new Error('Conflict: actor already has a property "'+e+'"')});var o=n&&n.send||"send";if("function"!=typeof t[o])throw new Error('Missing function. Function "'+o+'(to, message)" expected on actor or on params');var i=e.babbler(r),s=n&&n.receive||"receive",c=t.hasOwnProperty(s)?t[s]:null;return c?t[s]=function(e,n){return i._receive(n),c.call(t,e,n)}:t[s]=function(t,e){return i._receive(e)},i.send=function(e,n){setTimeout(function(){t[o](e,n)},0)},t.__babbler__={babbler:i,receiveOriginal:c,receiveName:s},t.ask=i.ask.bind(i),t.tell=i.tell.bind(i),t.listen=i.listen.bind(i),t.listenOnce=i.listenOnce.bind(i),t},e.unbabblify=function(t){var e=t.__babbler__;return e&&(delete t.__babbler__,delete t.ask,delete t.tell,delete t.listen,delete t.listenOnce,delete t[e.receiveName],e.receiveOriginal&&(t[e.receiveName]=e.receiveOriginal)),t}},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(!t)throw new Error("id required");this.id=t,this.listeners=[],this.conversations={},this.connect()}var o=n(60),i=n(84).Promise,s=n(88),c=n(91),u=(n(92),n(93),n(95)),a=n(96);n(97),r.prototype.isBabbler=!0,r.prototype.connect=function(t){if(this.disconnect(),t||(t=s["default"]()),"function"!=typeof t.connect)throw new Error("message bus must contain a function connect(params: {id: string, callback: function}) : string");if("function"!=typeof t.disconnect)throw new Error("message bus must contain a function disconnect(token: string)");if("function"!=typeof t.send)throw new Error("message bus must contain a function send(params: {id: string, message: *})");var e=null,n=new i(function(t,n){e=t}),r=t.connect({id:this.id,message:this._receive.bind(this),callback:e});return this.disconnect=function(){t.disconnect(r)},this.send=t.send,n},r.prototype._receive=function(t){if(t&&"id"in t&&"message"in t){var e=this,n=t.id,r=this.conversations[n];r&&r.length?r.forEach(function(e){e.deliver(t)}):(r||(r=[]),this.conversations[n]=r,this.listeners.forEach(function(o){var i=new c({id:n,self:e.id,other:t.from,context:{from:t.from},send:e.send});return r.push(i),i.deliver(t),e._process(o,i).then(function(){var t=r.indexOf(i);-1!==t&&r.splice(t,1),0===r.length&&delete e.conversations[n]})}))}},r.prototype.disconnect=function(){},r.prototype.send=function(t,e){throw new Error("Cannot send: not connected")},r.prototype.listen=function(t,e){var n=new a;this.listeners.push(n);var r=n;return t&&(r=r.iif(t)),e&&(r=r.then(e)),r},r.prototype.listenOnce=function(t,e){var n=new a;this.listeners.push(n);var r=this,o=n;return t&&(o=o.iif(t)),o=o.then(function(t){var e=r.listeners.indexOf(n);return-1!==e&&r.listeners.splice(e,1),t}),e&&(o=o.then(e)),o},r.prototype.tell=function(t,e){var n=this,r=o.v4(),i=new c({id:r,self:this.id,other:t,context:{from:t},send:n.send});this.conversations[r]=[i];var s=new u(e);return setTimeout(function(){n._process(s,i).then(function(){delete n.conversations[r]})},0),s},r.prototype.ask=function(t,e,n){return this.tell(t,e).listen(n)},r.prototype._process=function(t,e){return new i(function(n,r){function o(t,r){t.execute(e,r).then(function(t){t.block?o(t.block,t.result):n(e)})}o(t)})},t.exports=r},function(t,e,n){var r;(function(o){!function(i){"use strict";function s(){var t=i.crypto||i.msCrypto;if(!l&&t&&t.getRandomValues)try{var e=new Uint8Array(16);y=l=function(){return t.getRandomValues(e),e},l()}catch(n){}if(!l){var r=new Array(16);p=l=function(){for(var t,e=0;16>e;e++)0===(3&e)&&(t=4294967296*Math.random()),r[e]=t>>>((3&e)<<3)&255;return r},"undefined"!=typeof console&&console.warn&&console.warn("[SECURITY] node-uuid: crypto not usable, falling back to insecure Math.random()")}}function c(){try{var t=n(65).randomBytes;d=l=t&&function(){return t(16)},l()}catch(e){}}function u(t,e,n){var r=e&&n||0,o=0;for(e=e||[],t.toLowerCase().replace(/[0-9a-f]{2}/g,function(t){16>o&&(e[r+o++]=m[t])});16>o;)e[r+o++]=0;return e}function a(t,e){var n=e||0,r=g;return r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]}function f(t,e,n){var r=e&&n||0,o=e||[];t=t||{};var i=null!=t.clockseq?t.clockseq:E,s=null!=t.msecs?t.msecs:(new Date).getTime(),c=null!=t.nsecs?t.nsecs:k+1,u=s-x+(c-k)/1e4;if(0>u&&null==t.clockseq&&(i=i+1&16383),(0>u||s>x)&&null==t.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");x=s,k=c,E=i,s+=122192928e5;var f=(1e4*(268435455&s)+c)%4294967296;o[r++]=f>>>24&255,o[r++]=f>>>16&255,o[r++]=f>>>8&255,o[r++]=255&f;var h=s/4294967296*1e4&268435455;o[r++]=h>>>8&255,o[r++]=255&h,o[r++]=h>>>24&15|16,o[r++]=h>>>16&255,o[r++]=i>>>8|128,o[r++]=255&i;for(var l=t.node||b,p=0;6>p;p++)o[r+p]=l[p];return e?e:a(o)}function h(t,e,n){var r=e&&n||0;"string"==typeof t&&(e="binary"===t?new v(16):null,t=null),t=t||{};var o=t.random||(t.rng||l)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var i=0;16>i;i++)e[r+i]=o[i];return e||a(o)}var l,p,d,y;i?s():c();for(var v="function"==typeof o?o:Array,g=[],m={},_=0;256>_;_++)g[_]=(_+256).toString(16).substr(1),m[g[_]]=_;var w=l(),b=[1|w[0],w[1],w[2],w[3],w[4],w[5]],E=16383&(w[6]<<8|w[7]),x=0,k=0,S=h;S.v1=f,S.v4=h,S.parse=u,S.unparse=a,S.BufferClass=v,S._rng=l,S._mathRNG=p,S._nodeRNG=d,S._whatwgRNG=y,"undefined"!=typeof t&&t.exports?t.exports=S:(r=function(){return S}.call(e,n,e,t),!(void 0!==r&&(t.exports=r)))}("undefined"!=typeof window?window:null)}).call(e,n(61).Buffer)},function(t,e,n){(function(t,r){/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
"use strict";function o(){function t(){}try{var e=new Uint8Array(1);return e.foo=function(){return 42},e.constructor=t,42===e.foo()&&e.constructor===t&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(n){return!1}}function i(){return t.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function t(e){return this instanceof t?(t.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof e?s(this,e):"string"==typeof e?c(this,e,arguments.length>1?arguments[1]:"utf8"):u(this,e)):arguments.length>1?new t(e,arguments[1]):new t(e)}function s(e,n){if(e=y(e,0>n?0:0|v(n)),!t.TYPED_ARRAY_SUPPORT)for(var r=0;n>r;r++)e[r]=0;return e}function c(t,e,n){("string"!=typeof n||""===n)&&(n="utf8");var r=0|m(e,n);return t=y(t,r),t.write(e,n),t}function u(e,n){if(t.isBuffer(n))return a(e,n);if($(n))return f(e,n);if(null==n)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(n.buffer instanceof ArrayBuffer)return h(e,n);if(n instanceof ArrayBuffer)return l(e,n)}return n.length?p(e,n):d(e,n)}function a(t,e){var n=0|v(e.length);return t=y(t,n),e.copy(t,0,0,n),t}function f(t,e){var n=0|v(e.length);t=y(t,n);for(var r=0;n>r;r+=1)t[r]=255&e[r];return t}function h(t,e){var n=0|v(e.length);t=y(t,n);for(var r=0;n>r;r+=1)t[r]=255&e[r];return t}function l(e,n){return t.TYPED_ARRAY_SUPPORT?(n.byteLength,e=t._augment(new Uint8Array(n))):e=h(e,new Uint8Array(n)),e}function p(t,e){var n=0|v(e.length);t=y(t,n);for(var r=0;n>r;r+=1)t[r]=255&e[r];return t}function d(t,e){var n,r=0;"Buffer"===e.type&&$(e.data)&&(n=e.data,r=0|v(n.length)),t=y(t,r);for(var o=0;r>o;o+=1)t[o]=255&n[o];return t}function y(e,n){t.TYPED_ARRAY_SUPPORT?(e=t._augment(new Uint8Array(n)),e.__proto__=t.prototype):(e.length=n,e._isBuffer=!0);var r=0!==n&&n<=t.poolSize>>>1;return r&&(e.parent=X),e}function v(t){if(t>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|t}function g(e,n){if(!(this instanceof g))return new g(e,n);var r=new t(e,n);return delete r.parent,r}function m(t,e){"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":return H(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return K(t).length;default:if(r)return H(t).length;e=(""+e).toLowerCase(),r=!0}}function _(t,e,n){var r=!1;if(e=0|e,n=void 0===n||n===1/0?this.length:0|n,t||(t="utf8"),0>e&&(e=0),n>this.length&&(n=this.length),e>=n)return"";for(;;)switch(t){case"hex":return P(this,e,n);case"utf8":case"utf-8":return A(this,e,n);case"ascii":return B(this,e,n);case"binary":return C(this,e,n);case"base64":return O(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function w(t,e,n,r){n=Number(n)||0;var o=t.length-n;r?(r=Number(r),r>o&&(r=o)):r=o;var i=e.length;if(i%2!==0)throw new Error("Invalid hex string");r>i/2&&(r=i/2);for(var s=0;r>s;s++){var c=parseInt(e.substr(2*s,2),16);if(isNaN(c))throw new Error("Invalid hex string");t[n+s]=c}return s}function b(t,e,n,r){return G(H(e,t.length-n),t,n,r)}function E(t,e,n,r){return G(Y(e),t,n,r)}function x(t,e,n,r){return E(t,e,n,r)}function k(t,e,n,r){return G(K(e),t,n,r)}function S(t,e,n,r){return G(J(e,t.length-n),t,n,r)}function O(t,e,n){return 0===e&&n===t.length?W.fromByteArray(t):W.fromByteArray(t.slice(e,n))}function A(t,e,n){n=Math.min(t.length,n);for(var r=[],o=e;n>o;){var i=t[o],s=null,c=i>239?4:i>223?3:i>191?2:1;if(n>=o+c){var u,a,f,h;switch(c){case 1:128>i&&(s=i);break;case 2:u=t[o+1],128===(192&u)&&(h=(31&i)<<6|63&u,h>127&&(s=h));break;case 3:u=t[o+1],a=t[o+2],128===(192&u)&&128===(192&a)&&(h=(15&i)<<12|(63&u)<<6|63&a,h>2047&&(55296>h||h>57343)&&(s=h));break;case 4:u=t[o+1],a=t[o+2],f=t[o+3],128===(192&u)&&128===(192&a)&&128===(192&f)&&(h=(15&i)<<18|(63&u)<<12|(63&a)<<6|63&f,h>65535&&1114112>h&&(s=h))}}null===s?(s=65533,c=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),o+=c}return T(r)}function T(t){var e=t.length;if(Z>=e)return String.fromCharCode.apply(String,t);for(var n="",r=0;e>r;)n+=String.fromCharCode.apply(String,t.slice(r,r+=Z));return n}function B(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;n>o;o++)r+=String.fromCharCode(127&t[o]);return r}function C(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;n>o;o++)r+=String.fromCharCode(t[o]);return r}function P(t,e,n){var r=t.length;(!e||0>e)&&(e=0),(!n||0>n||n>r)&&(n=r);for(var o="",i=e;n>i;i++)o+=q(t[i]);return o}function I(t,e,n){for(var r=t.slice(e,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function R(t,e,n){if(t%1!==0||0>t)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function j(e,n,r,o,i,s){if(!t.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(n>i||s>n)throw new RangeError("value is out of bounds");if(r+o>e.length)throw new RangeError("index out of range")}function M(t,e,n,r){0>e&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-n,2);i>o;o++)t[n+o]=(e&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function U(t,e,n,r){0>e&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-n,4);i>o;o++)t[n+o]=e>>>8*(r?o:3-o)&255}function L(t,e,n,r,o,i){if(e>o||i>e)throw new RangeError("value is out of bounds");if(n+r>t.length)throw new RangeError("index out of range");if(0>n)throw new RangeError("index out of range")}function N(t,e,n,r,o){return o||L(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),V.write(t,e,n,r,23,4),n+4}function D(t,e,n,r,o){return o||L(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),V.write(t,e,n,r,52,8),n+8}function z(t){if(t=F(t).replace(tt,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function F(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function q(t){return 16>t?"0"+t.toString(16):t.toString(16)}function H(t,e){e=e||1/0;for(var n,r=t.length,o=null,i=[],s=0;r>s;s++){if(n=t.charCodeAt(s),n>55295&&57344>n){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(56320>n){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=(o-55296<<10|n-56320)+65536}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,128>n){if((e-=1)<0)break;i.push(n)}else if(2048>n){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(65536>n){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(1114112>n))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function Y(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e}function J(t,e){for(var n,r,o,i=[],s=0;s<t.length&&!((e-=2)<0);s++)n=t.charCodeAt(s),r=n>>8,o=n%256,i.push(o),i.push(r);return i}function K(t){return W.toByteArray(z(t))}function G(t,e,n,r){for(var o=0;r>o&&!(o+n>=e.length||o>=t.length);o++)e[o+n]=t[o];return o}var W=n(62),V=n(63),$=n(64);e.Buffer=t,e.SlowBuffer=g,e.INSPECT_MAX_BYTES=50,t.poolSize=8192;var X={};t.TYPED_ARRAY_SUPPORT=void 0!==r.TYPED_ARRAY_SUPPORT?r.TYPED_ARRAY_SUPPORT:o(),t.TYPED_ARRAY_SUPPORT?(t.prototype.__proto__=Uint8Array.prototype,t.__proto__=Uint8Array):(t.prototype.length=void 0,t.prototype.parent=void 0),t.isBuffer=function(t){return!(null==t||!t._isBuffer)},t.compare=function(e,n){if(!t.isBuffer(e)||!t.isBuffer(n))throw new TypeError("Arguments must be Buffers");if(e===n)return 0;for(var r=e.length,o=n.length,i=0,s=Math.min(r,o);s>i&&e[i]===n[i];)++i;return i!==s&&(r=e[i],o=n[i]),o>r?-1:r>o?1:0},t.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,n){if(!$(e))throw new TypeError("list argument must be an Array of Buffers.");if(0===e.length)return new t(0);var r;if(void 0===n)for(n=0,r=0;r<e.length;r++)n+=e[r].length;var o=new t(n),i=0;for(r=0;r<e.length;r++){var s=e[r];s.copy(o,i),i+=s.length}return o},t.byteLength=m,t.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?A(this,0,t):_.apply(this,arguments)},t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:0===t.compare(this,e)},t.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},t.prototype.compare=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:t.compare(this,e)},t.prototype.indexOf=function(e,n){function r(t,e,n){for(var r=-1,o=0;n+o<t.length;o++)if(t[n+o]===e[-1===r?0:o-r]){if(-1===r&&(r=o),o-r+1===e.length)return n+r}else r=-1;return-1}if(n>2147483647?n=2147483647:-2147483648>n&&(n=-2147483648),n>>=0,0===this.length)return-1;if(n>=this.length)return-1;if(0>n&&(n=Math.max(this.length+n,0)),"string"==typeof e)return 0===e.length?-1:String.prototype.indexOf.call(this,e,n);if(t.isBuffer(e))return r(this,e,n);if("number"==typeof e)return t.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,n):r(this,[e],n);throw new TypeError("val must be string, number or Buffer")},t.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},t.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},t.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else if(isFinite(e))e=0|e,isFinite(n)?(n=0|n,void 0===r&&(r="utf8")):(r=n,n=void 0);else{var o=r;r=e,e=0|n,n=o}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(0>n||0>e)||e>this.length)throw new RangeError("attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return w(this,t,e,n);case"utf8":case"utf-8":return b(this,t,e,n);case"ascii":return E(this,t,e,n);case"binary":return x(this,t,e,n);case"base64":return k(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Z=4096;t.prototype.slice=function(e,n){var r=this.length;e=~~e,n=void 0===n?r:~~n,0>e?(e+=r,0>e&&(e=0)):e>r&&(e=r),0>n?(n+=r,0>n&&(n=0)):n>r&&(n=r),e>n&&(n=e);var o;if(t.TYPED_ARRAY_SUPPORT)o=t._augment(this.subarray(e,n));else{var i=n-e;o=new t(i,void 0);for(var s=0;i>s;s++)o[s]=this[s+e]}return o.length&&(o.parent=this.parent||this),o},t.prototype.readUIntLE=function(t,e,n){t=0|t,e=0|e,n||R(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r},t.prototype.readUIntBE=function(t,e,n){t=0|t,e=0|e,n||R(t,e,this.length);for(var r=this[t+--e],o=1;e>0&&(o*=256);)r+=this[t+--e]*o;return r},t.prototype.readUInt8=function(t,e){return e||R(t,1,this.length),this[t]},t.prototype.readUInt16LE=function(t,e){return e||R(t,2,this.length),this[t]|this[t+1]<<8},t.prototype.readUInt16BE=function(t,e){return e||R(t,2,this.length),this[t]<<8|this[t+1]},t.prototype.readUInt32LE=function(t,e){return e||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},t.prototype.readUInt32BE=function(t,e){return e||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},t.prototype.readIntLE=function(t,e,n){t=0|t,e=0|e,n||R(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*e)),r},t.prototype.readIntBE=function(t,e,n){t=0|t,e=0|e,n||R(t,e,this.length);for(var r=e,o=1,i=this[t+--r];r>0&&(o*=256);)i+=this[t+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*e)),i},t.prototype.readInt8=function(t,e){return e||R(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},t.prototype.readInt16LE=function(t,e){e||R(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt16BE=function(t,e){e||R(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt32LE=function(t,e){return e||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},t.prototype.readInt32BE=function(t,e){return e||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},t.prototype.readFloatLE=function(t,e){return e||R(t,4,this.length),V.read(this,t,!0,23,4)},t.prototype.readFloatBE=function(t,e){return e||R(t,4,this.length),V.read(this,t,!1,23,4)},t.prototype.readDoubleLE=function(t,e){return e||R(t,8,this.length),V.read(this,t,!0,52,8)},t.prototype.readDoubleBE=function(t,e){return e||R(t,8,this.length),V.read(this,t,!1,52,8)},t.prototype.writeUIntLE=function(t,e,n,r){t=+t,e=0|e,n=0|n,r||j(this,t,e,n,Math.pow(2,8*n),0);var o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},t.prototype.writeUIntBE=function(t,e,n,r){t=+t,e=0|e,n=0|n,r||j(this,t,e,n,Math.pow(2,8*n),0);var o=n-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+n},t.prototype.writeUInt8=function(e,n,r){return e=+e,n=0|n,r||j(this,e,n,1,255,0),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[n]=255&e,n+1},t.prototype.writeUInt16LE=function(e,n,r){return e=+e,n=0|n,r||j(this,e,n,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8):M(this,e,n,!0),n+2},t.prototype.writeUInt16BE=function(e,n,r){return e=+e,n=0|n,r||j(this,e,n,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=255&e):M(this,e,n,!1),n+2},t.prototype.writeUInt32LE=function(e,n,r){return e=+e,n=0|n,r||j(this,e,n,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[n+3]=e>>>24,this[n+2]=e>>>16,this[n+1]=e>>>8,this[n]=255&e):U(this,e,n,!0),n+4},t.prototype.writeUInt32BE=function(e,n,r){return e=+e,n=0|n,r||j(this,e,n,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e):U(this,e,n,!1),n+4},t.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e=0|e,!r){var o=Math.pow(2,8*n-1);j(this,t,e,n,o-1,-o)}var i=0,s=1,c=0>t?1:0;for(this[e]=255&t;++i<n&&(s*=256);)this[e+i]=(t/s>>0)-c&255;return e+n},t.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e=0|e,!r){var o=Math.pow(2,8*n-1);j(this,t,e,n,o-1,-o)}var i=n-1,s=1,c=0>t?1:0;for(this[e+i]=255&t;--i>=0&&(s*=256);)this[e+i]=(t/s>>0)-c&255;return e+n},t.prototype.writeInt8=function(e,n,r){return e=+e,n=0|n,r||j(this,e,n,1,127,-128),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[n]=255&e,n+1},t.prototype.writeInt16LE=function(e,n,r){return e=+e,n=0|n,r||j(this,e,n,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8):M(this,e,n,!0),n+2},t.prototype.writeInt16BE=function(e,n,r){return e=+e,n=0|n,r||j(this,e,n,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=255&e):M(this,e,n,!1),n+2},t.prototype.writeInt32LE=function(e,n,r){return e=+e,n=0|n,r||j(this,e,n,4,2147483647,-2147483648),t.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8,this[n+2]=e>>>16,this[n+3]=e>>>24):U(this,e,n,!0),n+4},t.prototype.writeInt32BE=function(e,n,r){return e=+e,n=0|n,r||j(this,e,n,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e):U(this,e,n,!1),n+4},t.prototype.writeFloatLE=function(t,e,n){return N(this,t,e,!0,n)},t.prototype.writeFloatBE=function(t,e,n){return N(this,t,e,!1,n)},t.prototype.writeDoubleLE=function(t,e,n){return D(this,t,e,!0,n)},t.prototype.writeDoubleBE=function(t,e,n){return D(this,t,e,!1,n)},t.prototype.copy=function(e,n,r,o){if(r||(r=0),o||0===o||(o=this.length),n>=e.length&&(n=e.length),n||(n=0),o>0&&r>o&&(o=r),o===r)return 0;if(0===e.length||0===this.length)return 0;if(0>n)throw new RangeError("targetStart out of bounds");if(0>r||r>=this.length)throw new RangeError("sourceStart out of bounds");if(0>o)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-n<o-r&&(o=e.length-n+r);var i,s=o-r;if(this===e&&n>r&&o>n)for(i=s-1;i>=0;i--)e[i+n]=this[i+r];else if(1e3>s||!t.TYPED_ARRAY_SUPPORT)for(i=0;s>i;i++)e[i+n]=this[i+r];else e._set(this.subarray(r,r+s),n);return s},t.prototype.fill=function(t,e,n){if(t||(t=0),e||(e=0),n||(n=this.length),e>n)throw new RangeError("end < start");if(n!==e&&0!==this.length){if(0>e||e>=this.length)throw new RangeError("start out of bounds");if(0>n||n>this.length)throw new RangeError("end out of bounds");var r;if("number"==typeof t)for(r=e;n>r;r++)this[r]=t;else{var o=H(t.toString()),i=o.length;for(r=e;n>r;r++)this[r]=o[r%i]}return this}},t.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(t.TYPED_ARRAY_SUPPORT)return new t(this).buffer;for(var e=new Uint8Array(this.length),n=0,r=e.length;r>n;n+=1)e[n]=this[n];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var Q=t.prototype;t._augment=function(e){return e.constructor=t,e._isBuffer=!0,e._set=e.set,e.get=Q.get,e.set=Q.set,e.write=Q.write,e.toString=Q.toString,e.toLocaleString=Q.toString,e.toJSON=Q.toJSON,e.equals=Q.equals,e.compare=Q.compare,e.indexOf=Q.indexOf,e.copy=Q.copy,e.slice=Q.slice,e.readUIntLE=Q.readUIntLE,e.readUIntBE=Q.readUIntBE,e.readUInt8=Q.readUInt8,e.readUInt16LE=Q.readUInt16LE,e.readUInt16BE=Q.readUInt16BE,e.readUInt32LE=Q.readUInt32LE,e.readUInt32BE=Q.readUInt32BE,e.readIntLE=Q.readIntLE,e.readIntBE=Q.readIntBE,e.readInt8=Q.readInt8,e.readInt16LE=Q.readInt16LE,e.readInt16BE=Q.readInt16BE,e.readInt32LE=Q.readInt32LE,e.readInt32BE=Q.readInt32BE,e.readFloatLE=Q.readFloatLE,e.readFloatBE=Q.readFloatBE,e.readDoubleLE=Q.readDoubleLE,e.readDoubleBE=Q.readDoubleBE,e.writeUInt8=Q.writeUInt8,e.writeUIntLE=Q.writeUIntLE,e.writeUIntBE=Q.writeUIntBE,e.writeUInt16LE=Q.writeUInt16LE,e.writeUInt16BE=Q.writeUInt16BE,e.writeUInt32LE=Q.writeUInt32LE,e.writeUInt32BE=Q.writeUInt32BE,e.writeIntLE=Q.writeIntLE,e.writeIntBE=Q.writeIntBE,e.writeInt8=Q.writeInt8,e.writeInt16LE=Q.writeInt16LE,e.writeInt16BE=Q.writeInt16BE,e.writeInt32LE=Q.writeInt32LE,e.writeInt32BE=Q.writeInt32BE,e.writeFloatLE=Q.writeFloatLE,e.writeFloatBE=Q.writeFloatBE,e.writeDoubleLE=Q.writeDoubleLE,e.writeDoubleBE=Q.writeDoubleBE,e.fill=Q.fill,e.inspect=Q.inspect,e.toArrayBuffer=Q.toArrayBuffer,e};var tt=/[^+\/0-9A-Za-z-_]/g}).call(e,n(61).Buffer,function(){return this}())},function(t,e,n){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function e(t){var e=t.charCodeAt(0);return e===s||e===h?62:e===c||e===l?63:u>e?-1:u+10>e?e-u+26+26:f+26>e?e-f:a+26>e?e-a+26:void 0}function n(t){function n(t){a[h++]=t}var r,o,s,c,u,a;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var f=t.length;u="="===t.charAt(f-2)?2:"="===t.charAt(f-1)?1:0,a=new i(3*t.length/4-u),s=u>0?t.length-4:t.length;var h=0;for(r=0,o=0;s>r;r+=4,o+=3)c=e(t.charAt(r))<<18|e(t.charAt(r+1))<<12|e(t.charAt(r+2))<<6|e(t.charAt(r+3)),n((16711680&c)>>16),n((65280&c)>>8),n(255&c);return 2===u?(c=e(t.charAt(r))<<2|e(t.charAt(r+1))>>4,n(255&c)):1===u&&(c=e(t.charAt(r))<<10|e(t.charAt(r+1))<<4|e(t.charAt(r+2))>>2,n(c>>8&255),n(255&c)),a}function o(t){function e(t){return r.charAt(t)}function n(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}var o,i,s,c=t.length%3,u="";for(o=0,s=t.length-c;s>o;o+=3)i=(t[o]<<16)+(t[o+1]<<8)+t[o+2],u+=n(i);switch(c){case 1:i=t[t.length-1],u+=e(i>>2),u+=e(i<<4&63),u+="==";break;case 2:i=(t[t.length-2]<<8)+t[t.length-1],u+=e(i>>10),u+=e(i>>4&63),u+=e(i<<2&63),u+="="}return u}var i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="+".charCodeAt(0),c="/".charCodeAt(0),u="0".charCodeAt(0),a="a".charCodeAt(0),f="A".charCodeAt(0),h="-".charCodeAt(0),l="_".charCodeAt(0);t.toByteArray=n,t.fromByteArray=o}(e)},function(t,e){e.read=function(t,e,n,r,o){var i,s,c=8*o-r-1,u=(1<<c)-1,a=u>>1,f=-7,h=n?o-1:0,l=n?-1:1,p=t[e+h];for(h+=l,i=p&(1<<-f)-1,p>>=-f,f+=c;f>0;i=256*i+t[e+h],h+=l,f-=8);for(s=i&(1<<-f)-1,i>>=-f,f+=r;f>0;s=256*s+t[e+h],h+=l,f-=8);if(0===i)i=1-a;else{if(i===u)return s?NaN:(p?-1:1)*(1/0);s+=Math.pow(2,r),i-=a}return(p?-1:1)*s*Math.pow(2,i-r)},e.write=function(t,e,n,r,o,i){var s,c,u,a=8*i-o-1,f=(1<<a)-1,h=f>>1,l=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,d=r?1:-1,y=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=s+h>=1?l/u:l*Math.pow(2,1-h),e*u>=2&&(s++,u/=2),s+h>=f?(c=0,s=f):s+h>=1?(c=(e*u-1)*Math.pow(2,o),s+=h):(c=e*Math.pow(2,h-1)*Math.pow(2,o),s=0));o>=8;t[n+p]=255&c,p+=d,c/=256,o-=8);for(s=s<<o|c,a+=o;a>0;t[n+p]=255&s,p+=d,s/=256,a-=8);t[n+p-d]|=128*y}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){(function(t){function r(){var t=[].slice.call(arguments).join(" ");throw new Error([t,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}function o(t,e){for(var n in t)e(t[n],n)}var i=n(66);e.createHash=n(68),e.createHmac=n(81),e.randomBytes=function(e,n){if(!n||!n.call)return new t(i(e));try{n.call(this,void 0,new t(i(e)))}catch(r){n(r)}},e.getHashes=function(){return["sha1","sha256","sha512","md5","rmd160"]};var s=n(82)(e);e.pbkdf2=s.pbkdf2,e.pbkdf2Sync=s.pbkdf2Sync,o(["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman"],function(t){e[t]=function(){r("sorry,",t,"is not implemented yet")}})}).call(e,n(61).Buffer)},function(t,e,n){(function(e,r){!function(){var o=("undefined"==typeof window?e:window)||{};_crypto=o.crypto||o.msCrypto||n(67),t.exports=function(t){if(_crypto.getRandomValues){var e=new r(t);return _crypto.getRandomValues(e),e}if(_crypto.randomBytes)return _crypto.randomBytes(t);throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}}()}).call(e,function(){return this}(),n(61).Buffer)},function(t,e){},function(t,e,n){(function(e){function r(t){return function(){var n=[],r={update:function(t,r){return e.isBuffer(t)||(t=new e(t,r)),n.push(t),this},digest:function(r){var o=e.concat(n),i=t(o);return n=null,r?i.toString(r):i}};return r}}var o=n(69),i=r(n(78)),s=r(n(80));t.exports=function(t){return"md5"===t?new i:"rmd160"===t?new s:o(t)}}).call(e,n(61).Buffer)},function(t,e,n){var e=t.exports=function(t){var n=e[t];if(!n)throw new Error(t+" is not supported (we accept pull requests)");return new n},r=n(61).Buffer,o=n(70)(r);e.sha1=n(71)(r,o),e.sha256=n(76)(r,o),e.sha512=n(77)(r,o)},function(t,e){t.exports=function(t){function e(e,n){this._block=new t(e),this._finalSize=n,this._blockSize=e,this._len=0,this._s=0}return e.prototype.init=function(){this._s=0,this._len=0},e.prototype.update=function(e,n){"string"==typeof e&&(n=n||"utf8",e=new t(e,n));for(var r=this._len+=e.length,o=this._s=this._s||0,i=0,s=this._block;r>o;){for(var c=Math.min(e.length,i+this._blockSize-o%this._blockSize),u=c-i,a=0;u>a;a++)s[o%this._blockSize+a]=e[a+i];o+=u,i+=u,o%this._blockSize===0&&this._update(s)}return this._s=o,this},e.prototype.digest=function(t){var e=8*this._len;this._block[this._len%this._blockSize]=128,this._block.fill(0,this._len%this._blockSize+1),e%(8*this._blockSize)>=8*this._finalSize&&(this._update(this._block),this._block.fill(0)),this._block.writeInt32BE(e,this._blockSize-4);var n=this._update(this._block)||this._hash();return t?n.toString(t):n},e.prototype._update=function(){throw new Error("_update must be implemented by subclass")},e}},function(t,e,n){var r=n(72).inherits;t.exports=function(t,e){function n(){return d.length?d.pop().init():this instanceof n?(this._w=p,e.call(this,64,56),this._h=null,void this.init()):new n}function o(t,e,n,r){return 20>t?e&n|~e&r:40>t?e^n^r:60>t?e&n|e&r|n&r:e^n^r}function i(t){return 20>t?1518500249:40>t?1859775393:60>t?-1894007588:-899497514}function s(t,e){return t+e|0}function c(t,e){return t<<e|t>>>32-e}var u=0,a=4,f=8,h=12,l=16,p=new("undefined"==typeof Int32Array?Array:Int32Array)(80),d=[];return r(n,e),n.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,e.prototype.init.call(this),this},n.prototype._POOL=d,n.prototype._update=function(t){var e,n,r,u,a,f,h,l,p,d;e=f=this._a,n=h=this._b,r=l=this._c,u=p=this._d,a=d=this._e;for(var y=this._w,v=0;80>v;v++){var g=y[v]=16>v?t.readInt32BE(4*v):c(y[v-3]^y[v-8]^y[v-14]^y[v-16],1),m=s(s(c(e,5),o(v,n,r,u)),s(s(a,g),i(v)));a=u,u=r,r=c(n,30),n=e,e=m}this._a=s(e,f),this._b=s(n,h),this._c=s(r,l),this._d=s(u,p),this._e=s(a,d)},n.prototype._hash=function(){d.length<100&&d.push(this);var e=new t(20);return e.writeInt32BE(0|this._a,u),e.writeInt32BE(0|this._b,a),e.writeInt32BE(0|this._c,f),e.writeInt32BE(0|this._d,h),e.writeInt32BE(0|this._e,l),e},n}},function(t,e,n){(function(t,r){function o(t,n){var r={seen:[],stylize:s};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),y(n)?r.showHidden=n:n&&e._extend(r,n),b(r.showHidden)&&(r.showHidden=!1),b(r.depth)&&(r.depth=2),b(r.colors)&&(r.colors=!1),b(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=i),u(r,t,r.depth)}function i(t,e){var n=o.styles[e];return n?"["+o.colors[n][0]+"m"+t+"["+o.colors[n][1]+"m":t}function s(t,e){return t}function c(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}function u(t,n,r){if(t.customInspect&&n&&O(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var o=n.inspect(r,t);return _(o)||(o=u(t,o,r)),o}var i=a(t,n);if(i)return i;var s=Object.keys(n),y=c(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(n)),S(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return f(n);if(0===s.length){if(O(n)){var v=n.name?": "+n.name:"";return t.stylize("[Function"+v+"]","special")}if(E(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(k(n))return t.stylize(Date.prototype.toString.call(n),"date");if(S(n))return f(n)}var g="",m=!1,w=["{","}"];if(d(n)&&(m=!0,w=["[","]"]),O(n)){var b=n.name?": "+n.name:"";g=" [Function"+b+"]"}if(E(n)&&(g=" "+RegExp.prototype.toString.call(n)),k(n)&&(g=" "+Date.prototype.toUTCString.call(n)),S(n)&&(g=" "+f(n)),0===s.length&&(!m||0==n.length))return w[0]+g+w[1];if(0>r)return E(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");t.seen.push(n);var x;return x=m?h(t,n,r,y,s):s.map(function(e){return l(t,n,r,y,e,m)}),t.seen.pop(),p(x,g,w)}function a(t,e){if(b(e))return t.stylize("undefined","undefined");if(_(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return m(e)?t.stylize(""+e,"number"):y(e)?t.stylize(""+e,"boolean"):v(e)?t.stylize("null","null"):void 0}function f(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,n,r,o){for(var i=[],s=0,c=e.length;c>s;++s)P(e,String(s))?i.push(l(t,e,n,r,String(s),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(l(t,e,n,r,o,!0))}),i}function l(t,e,n,r,o,i){var s,c,a;if(a=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]},a.get?c=a.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):a.set&&(c=t.stylize("[Setter]","special")),P(r,o)||(s="["+o+"]"),c||(t.seen.indexOf(a.value)<0?(c=v(n)?u(t,a.value,null):u(t,a.value,n-1),c.indexOf("\n")>-1&&(c=i?c.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+c.split("\n").map(function(t){return"   "+t}).join("\n"))):c=t.stylize("[Circular]","special")),b(s)){if(i&&o.match(/^\d+$/))return c;s=JSON.stringify(""+o),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+c}function p(t,e,n){var r=0,o=t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return o>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function d(t){return Array.isArray(t)}function y(t){return"boolean"==typeof t}function v(t){return null===t}function g(t){return null==t}function m(t){return"number"==typeof t}function _(t){return"string"==typeof t}function w(t){return"symbol"==typeof t}function b(t){return void 0===t}function E(t){return x(t)&&"[object RegExp]"===T(t)}function x(t){return"object"==typeof t&&null!==t}function k(t){return x(t)&&"[object Date]"===T(t)}function S(t){return x(t)&&("[object Error]"===T(t)||t instanceof Error)}function O(t){return"function"==typeof t}function A(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function T(t){return Object.prototype.toString.call(t)}function B(t){return 10>t?"0"+t.toString(10):t.toString(10)}function C(){var t=new Date,e=[B(t.getHours()),B(t.getMinutes()),B(t.getSeconds())].join(":");return[t.getDate(),M[t.getMonth()],e].join(" ")}function P(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var I=/%[sdj%]/g;e.format=function(t){if(!_(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(o(arguments[n]));return e.join(" ")}for(var n=1,r=arguments,i=r.length,s=String(t).replace(I,function(t){if("%%"===t)return"%";if(n>=i)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return t}}),c=r[n];i>n;c=r[++n])s+=v(c)||!x(c)?" "+c:" "+o(c);return s},e.deprecate=function(n,o){function i(){if(!s){if(r.throwDeprecation)throw new Error(o);r.traceDeprecation?console.trace(o):console.error(o),s=!0}return n.apply(this,arguments)}if(b(t.process))return function(){return e.deprecate(n,o).apply(this,arguments)};if(r.noDeprecation===!0)return n;var s=!1;return i};var R,j={};e.debuglog=function(t){if(b(R)&&(R=r.env.NODE_DEBUG||""),t=t.toUpperCase(),!j[t])if(new RegExp("\\b"+t+"\\b","i").test(R)){var n=r.pid;j[t]=function(){var r=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,r)}}else j[t]=function(){};return j[t]},e.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=d,e.isBoolean=y,e.isNull=v,e.isNullOrUndefined=g,e.isNumber=m,e.isString=_,e.isSymbol=w,e.isUndefined=b,e.isRegExp=E,e.isObject=x,e.isDate=k,e.isError=S,e.isFunction=O,e.isPrimitive=A,e.isBuffer=n(74);var M=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",C(),e.format.apply(e,arguments))},e.inherits=n(75),e._extend=function(t,e){if(!e||!x(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(e,function(){return this}(),n(73))},function(t,e){function n(){a=!1,s.length?u=s.concat(u):f=-1,u.length&&r()}function r(){if(!a){var t=setTimeout(n);a=!0;for(var e=u.length;e;){for(s=u,u=[];++f<e;)s&&s[f].run();f=-1,e=u.length}s=null,a=!1,clearTimeout(t)}}function o(t,e){this.fun=t,this.array=e}function i(){}var s,c=t.exports={},u=[],a=!1,f=-1;c.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new o(t,e)),1!==u.length||a||setTimeout(r,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=i,c.addListener=i,c.once=i,c.off=i,c.removeListener=i,c.removeAllListeners=i,c.emit=i,c.binding=function(t){throw new Error("process.binding is not supported")},c.cwd=function(){
return"/"},c.chdir=function(t){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){var r=n(72).inherits;t.exports=function(t,e){function n(){this.init(),this._w=p,e.call(this,64,56)}function o(t,e){return t>>>e|t<<32-e}function i(t,e){return t>>>e}function s(t,e,n){return t&e^~t&n}function c(t,e,n){return t&e^t&n^e&n}function u(t){return o(t,2)^o(t,13)^o(t,22)}function a(t){return o(t,6)^o(t,11)^o(t,25)}function f(t){return o(t,7)^o(t,18)^i(t,3)}function h(t){return o(t,17)^o(t,19)^i(t,10)}var l=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],p=new Array(64);return r(n,e),n.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._len=this._s=0,this},n.prototype._update=function(t){var e,n,r,o,i,p,d,y,v,g,m=this._w;e=0|this._a,n=0|this._b,r=0|this._c,o=0|this._d,i=0|this._e,p=0|this._f,d=0|this._g,y=0|this._h;for(var _=0;64>_;_++){var w=m[_]=16>_?t.readInt32BE(4*_):h(m[_-2])+m[_-7]+f(m[_-15])+m[_-16];v=y+a(i)+s(i,p,d)+l[_]+w,g=u(e)+c(e,n,r),y=d,d=p,p=i,i=o+v,o=r,r=n,n=e,e=v+g}this._a=e+this._a|0,this._b=n+this._b|0,this._c=r+this._c|0,this._d=o+this._d|0,this._e=i+this._e|0,this._f=p+this._f|0,this._g=d+this._g|0,this._h=y+this._h|0},n.prototype._hash=function(){var e=new t(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},n}},function(t,e,n){var r=n(72).inherits;t.exports=function(t,e){function n(){this.init(),this._w=u,e.call(this,128,112)}function o(t,e,n){return t>>>n|e<<32-n}function i(t,e,n){return t&e^~t&n}function s(t,e,n){return t&e^t&n^e&n}var c=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],u=new Array(160);return r(n,e),n.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._al=-205731576,this._bl=-2067093701,this._cl=-23791573,this._dl=1595750129,this._el=-1377402159,this._fl=725511199,this._gl=-79577749,this._hl=327033209,this._len=this._s=0,this},n.prototype._update=function(t){var e,n,r,u,a,f,h,l,p,d,y,v,g,m,_,w,b=this._w;e=0|this._a,n=0|this._b,r=0|this._c,u=0|this._d,a=0|this._e,f=0|this._f,h=0|this._g,l=0|this._h,p=0|this._al,d=0|this._bl,y=0|this._cl,v=0|this._dl,g=0|this._el,m=0|this._fl,_=0|this._gl,w=0|this._hl;for(var E=0;80>E;E++){var x,k,S=2*E;if(16>E)x=b[S]=t.readInt32BE(4*S),k=b[S+1]=t.readInt32BE(4*S+4);else{var O=b[S-30],A=b[S-30+1],T=o(O,A,1)^o(O,A,8)^O>>>7,B=o(A,O,1)^o(A,O,8)^o(A,O,7);O=b[S-4],A=b[S-4+1];var C=o(O,A,19)^o(A,O,29)^O>>>6,P=o(A,O,19)^o(O,A,29)^o(A,O,6),I=b[S-14],R=b[S-14+1],j=b[S-32],M=b[S-32+1];k=B+R,x=T+I+(B>>>0>k>>>0?1:0),k+=P,x=x+C+(P>>>0>k>>>0?1:0),k+=M,x=x+j+(M>>>0>k>>>0?1:0),b[S]=x,b[S+1]=k}var U=s(e,n,r),L=s(p,d,y),N=o(e,p,28)^o(p,e,2)^o(p,e,7),D=o(p,e,28)^o(e,p,2)^o(e,p,7),z=o(a,g,14)^o(a,g,18)^o(g,a,9),F=o(g,a,14)^o(g,a,18)^o(a,g,9),q=c[S],H=c[S+1],Y=i(a,f,h),J=i(g,m,_),K=w+F,G=l+z+(w>>>0>K>>>0?1:0);K+=J,G=G+Y+(J>>>0>K>>>0?1:0),K+=H,G=G+q+(H>>>0>K>>>0?1:0),K+=k,G=G+x+(k>>>0>K>>>0?1:0);var W=D+L,V=N+U+(D>>>0>W>>>0?1:0);l=h,w=_,h=f,_=m,f=a,m=g,g=v+K|0,a=u+G+(v>>>0>g>>>0?1:0)|0,u=r,v=y,r=n,y=d,n=e,d=p,p=K+W|0,e=G+V+(K>>>0>p>>>0?1:0)|0}this._al=this._al+p|0,this._bl=this._bl+d|0,this._cl=this._cl+y|0,this._dl=this._dl+v|0,this._el=this._el+g|0,this._fl=this._fl+m|0,this._gl=this._gl+_|0,this._hl=this._hl+w|0,this._a=this._a+e+(this._al>>>0<p>>>0?1:0)|0,this._b=this._b+n+(this._bl>>>0<d>>>0?1:0)|0,this._c=this._c+r+(this._cl>>>0<y>>>0?1:0)|0,this._d=this._d+u+(this._dl>>>0<v>>>0?1:0)|0,this._e=this._e+a+(this._el>>>0<g>>>0?1:0)|0,this._f=this._f+f+(this._fl>>>0<m>>>0?1:0)|0,this._g=this._g+h+(this._gl>>>0<_>>>0?1:0)|0,this._h=this._h+l+(this._hl>>>0<w>>>0?1:0)|0},n.prototype._hash=function(){function e(t,e,r){n.writeInt32BE(t,r),n.writeInt32BE(e,r+4)}var n=new t(64);return e(this._a,this._al,0),e(this._b,this._bl,8),e(this._c,this._cl,16),e(this._d,this._dl,24),e(this._e,this._el,32),e(this._f,this._fl,40),e(this._g,this._gl,48),e(this._h,this._hl,56),n},n}},function(t,e,n){function r(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;for(var n=1732584193,r=-271733879,o=-1732584194,f=271733878,h=0;h<t.length;h+=16){var l=n,p=r,d=o,y=f;n=i(n,r,o,f,t[h+0],7,-680876936),f=i(f,n,r,o,t[h+1],12,-389564586),o=i(o,f,n,r,t[h+2],17,606105819),r=i(r,o,f,n,t[h+3],22,-1044525330),n=i(n,r,o,f,t[h+4],7,-176418897),f=i(f,n,r,o,t[h+5],12,1200080426),o=i(o,f,n,r,t[h+6],17,-1473231341),r=i(r,o,f,n,t[h+7],22,-45705983),n=i(n,r,o,f,t[h+8],7,1770035416),f=i(f,n,r,o,t[h+9],12,-1958414417),o=i(o,f,n,r,t[h+10],17,-42063),r=i(r,o,f,n,t[h+11],22,-1990404162),n=i(n,r,o,f,t[h+12],7,1804603682),f=i(f,n,r,o,t[h+13],12,-40341101),o=i(o,f,n,r,t[h+14],17,-1502002290),r=i(r,o,f,n,t[h+15],22,1236535329),n=s(n,r,o,f,t[h+1],5,-165796510),f=s(f,n,r,o,t[h+6],9,-1069501632),o=s(o,f,n,r,t[h+11],14,643717713),r=s(r,o,f,n,t[h+0],20,-373897302),n=s(n,r,o,f,t[h+5],5,-701558691),f=s(f,n,r,o,t[h+10],9,38016083),o=s(o,f,n,r,t[h+15],14,-660478335),r=s(r,o,f,n,t[h+4],20,-405537848),n=s(n,r,o,f,t[h+9],5,568446438),f=s(f,n,r,o,t[h+14],9,-1019803690),o=s(o,f,n,r,t[h+3],14,-187363961),r=s(r,o,f,n,t[h+8],20,1163531501),n=s(n,r,o,f,t[h+13],5,-1444681467),f=s(f,n,r,o,t[h+2],9,-51403784),o=s(o,f,n,r,t[h+7],14,1735328473),r=s(r,o,f,n,t[h+12],20,-1926607734),n=c(n,r,o,f,t[h+5],4,-378558),f=c(f,n,r,o,t[h+8],11,-2022574463),o=c(o,f,n,r,t[h+11],16,1839030562),r=c(r,o,f,n,t[h+14],23,-35309556),n=c(n,r,o,f,t[h+1],4,-1530992060),f=c(f,n,r,o,t[h+4],11,1272893353),o=c(o,f,n,r,t[h+7],16,-155497632),r=c(r,o,f,n,t[h+10],23,-1094730640),n=c(n,r,o,f,t[h+13],4,681279174),f=c(f,n,r,o,t[h+0],11,-358537222),o=c(o,f,n,r,t[h+3],16,-722521979),r=c(r,o,f,n,t[h+6],23,76029189),n=c(n,r,o,f,t[h+9],4,-640364487),f=c(f,n,r,o,t[h+12],11,-421815835),o=c(o,f,n,r,t[h+15],16,530742520),r=c(r,o,f,n,t[h+2],23,-995338651),n=u(n,r,o,f,t[h+0],6,-198630844),f=u(f,n,r,o,t[h+7],10,1126891415),o=u(o,f,n,r,t[h+14],15,-1416354905),r=u(r,o,f,n,t[h+5],21,-57434055),n=u(n,r,o,f,t[h+12],6,1700485571),f=u(f,n,r,o,t[h+3],10,-1894986606),o=u(o,f,n,r,t[h+10],15,-1051523),r=u(r,o,f,n,t[h+1],21,-2054922799),n=u(n,r,o,f,t[h+8],6,1873313359),f=u(f,n,r,o,t[h+15],10,-30611744),o=u(o,f,n,r,t[h+6],15,-1560198380),r=u(r,o,f,n,t[h+13],21,1309151649),n=u(n,r,o,f,t[h+4],6,-145523070),f=u(f,n,r,o,t[h+11],10,-1120210379),o=u(o,f,n,r,t[h+2],15,718787259),r=u(r,o,f,n,t[h+9],21,-343485551),n=a(n,l),r=a(r,p),o=a(o,d),f=a(f,y)}return Array(n,r,o,f)}function o(t,e,n,r,o,i){return a(f(a(a(e,t),a(r,i)),o),n)}function i(t,e,n,r,i,s,c){return o(e&n|~e&r,t,e,i,s,c)}function s(t,e,n,r,i,s,c){return o(e&r|n&~r,t,e,i,s,c)}function c(t,e,n,r,i,s,c){return o(e^n^r,t,e,i,s,c)}function u(t,e,n,r,i,s,c){return o(n^(e|~r),t,e,i,s,c)}function a(t,e){var n=(65535&t)+(65535&e),r=(t>>16)+(e>>16)+(n>>16);return r<<16|65535&n}function f(t,e){return t<<e|t>>>32-e}var h=n(79);t.exports=function(t){return h.hash(t,r,16)}},function(t,e,n){(function(e){function n(t,n){if(t.length%i!==0){var r=t.length+(i-t.length%i);t=e.concat([t,s],r)}for(var o=[],c=n?t.readInt32BE:t.readInt32LE,u=0;u<t.length;u+=i)o.push(c.call(t,u));return o}function r(t,n,r){for(var o=new e(n),i=r?o.writeInt32BE:o.writeInt32LE,s=0;s<t.length;s++)i.call(o,t[s],4*s,!0);return o}function o(t,o,i,s){e.isBuffer(t)||(t=new e(t));var u=o(n(t,s),t.length*c);return r(u,i,s)}var i=4,s=new e(i);s.fill(0);var c=8;t.exports={hash:o}}).call(e,n(61).Buffer)},function(t,e,n){(function(e){function n(t,e,n){return t^e^n}function r(t,e,n){return t&e|~t&n}function o(t,e,n){return(t|~e)^n}function i(t,e,n){return t&n|e&~n}function s(t,e,n){return t^(e|~n)}function c(t,e){return t<<e|t>>>32-e}function u(t){var n=[1732584193,4023233417,2562383102,271733878,3285377520];"string"==typeof t&&(t=new e(t,"utf8"));var r=y(t),o=8*t.length,i=8*t.length;r[o>>>5]|=128<<24-o%32,r[(o+64>>>9<<4)+14]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);for(var s=0;s<r.length;s+=16)g(n,r,s);for(var s=0;5>s;s++){var c=n[s];n[s]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}var u=v(n);return new e(u)}t.exports=u;var a=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],f=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],h=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],l=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],p=[0,1518500249,1859775393,2400959708,2840853838],d=[1352829926,1548603684,1836072691,2053994217,0],y=function(t){for(var e=[],n=0,r=0;n<t.length;n++,r+=8)e[r>>>5]|=t[n]<<24-r%32;return e},v=function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},g=function(t,e,u){for(var y=0;16>y;y++){var v=u+y,g=e[v];e[v]=16711935&(g<<8|g>>>24)|4278255360&(g<<24|g>>>8)}var m,_,w,b,E,x,k,S,O,A;x=m=t[0],k=_=t[1],S=w=t[2],O=b=t[3],A=E=t[4];for(var T,y=0;80>y;y+=1)T=m+e[u+a[y]]|0,T+=16>y?n(_,w,b)+p[0]:32>y?r(_,w,b)+p[1]:48>y?o(_,w,b)+p[2]:64>y?i(_,w,b)+p[3]:s(_,w,b)+p[4],T=0|T,T=c(T,h[y]),T=T+E|0,m=E,E=b,b=c(w,10),w=_,_=T,T=x+e[u+f[y]]|0,T+=16>y?s(k,S,O)+d[0]:32>y?i(k,S,O)+d[1]:48>y?o(k,S,O)+d[2]:64>y?r(k,S,O)+d[3]:n(k,S,O)+d[4],T=0|T,T=c(T,l[y]),T=T+A|0,x=A,A=O,O=c(S,10),S=k,k=T;T=t[1]+w+O|0,t[1]=t[2]+b+A|0,t[2]=t[3]+E+x|0,t[3]=t[4]+m+k|0,t[4]=t[0]+_+S|0,t[0]=T}}).call(e,n(61).Buffer)},function(t,e,n){(function(e){function r(t,n){if(!(this instanceof r))return new r(t,n);this._opad=u,this._alg=t;var s="sha512"===t?128:64;n=this._key=e.isBuffer(n)?n:new e(n),n.length>s?n=o(t).update(n).digest():n.length<s&&(n=e.concat([n,i],s));for(var c=this._ipad=new e(s),u=this._opad=new e(s),a=0;s>a;a++)c[a]=54^n[a],u[a]=92^n[a];this._hash=o(t).update(c)}var o=n(68),i=new e(128);i.fill(0),t.exports=r,r.prototype.update=function(t,e){return this._hash.update(t,e),this},r.prototype.digest=function(t){var e=this._hash.digest();return o(this._alg).update(this._opad).update(e).digest(t)}}).call(e,n(61).Buffer)},function(t,e,n){var r=n(83);t.exports=function(t,e){e=e||{};var n=r(t);return e.pbkdf2=n.pbkdf2,e.pbkdf2Sync=n.pbkdf2Sync,e}},function(t,e,n){(function(e){t.exports=function(t){function n(t,e,n,o,i,s){if("function"==typeof i&&(s=i,i=void 0),"function"!=typeof s)throw new Error("No callback provided to pbkdf2");setTimeout(function(){var c;try{c=r(t,e,n,o,i)}catch(u){return s(u)}s(void 0,c)})}function r(n,r,o,i,s){if("number"!=typeof o)throw new TypeError("Iterations not a number");if(0>o)throw new TypeError("Bad iterations");if("number"!=typeof i)throw new TypeError("Key length not a number");if(0>i)throw new TypeError("Bad key length");s=s||"sha1",e.isBuffer(n)||(n=new e(n)),e.isBuffer(r)||(r=new e(r));var c,u,a,f=1,h=new e(i),l=new e(r.length+4);r.copy(l,0,0,r.length);for(var p=1;f>=p;p++){l.writeUInt32BE(p,r.length);var d=t.createHmac(s,n).update(l).digest();if(!c&&(c=d.length,a=new e(c),f=Math.ceil(i/c),u=i-(f-1)*c,i>(Math.pow(2,32)-1)*c))throw new TypeError("keylen exceeds maximum length");d.copy(a,0,0,c);for(var y=1;o>y;y++){d=t.createHmac(s,n).update(d).digest();for(var v=0;c>v;v++)a[v]^=d[v]}var g=(p-1)*c,m=p==f?u:c;a.copy(h,g,0,m)}return h}return{pbkdf2:n,pbkdf2Sync:r}}}).call(e,n(61).Buffer)},function(t,e,n){var r;(function(t,o,i){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
	 * @version   3.1.2
	 */
(function(){"use strict";function s(t){return"function"==typeof t||"object"==typeof t&&null!==t}function c(t){return"function"==typeof t}function u(t){G=t}function a(t){X=t}function f(){return function(){t.nextTick(y)}}function h(){return function(){K(y)}}function l(){var t=0,e=new tt(y),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function p(){var t=new MessageChannel;return t.port1.onmessage=y,function(){t.port2.postMessage(0)}}function d(){return function(){setTimeout(y,1)}}function y(){for(var t=0;$>t;t+=2){var e=rt[t],n=rt[t+1];e(n),rt[t]=void 0,rt[t+1]=void 0}$=0}function v(){try{var t=n(86);return K=t.runOnLoop||t.runOnContext,h()}catch(e){return d()}}function g(t,e){var n=this,r=n._state;if(r===ct&&!t||r===ut&&!e)return this;var o=new this.constructor(_),i=n._result;if(r){var s=arguments[r-1];X(function(){M(r,o,s,i)})}else P(n,o,t,e);return o}function m(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(_);return A(n,t),n}function _(){}function w(){return new TypeError("You cannot resolve a promise with itself")}function b(){return new TypeError("A promises callback cannot return that same promise.")}function E(t){try{return t.then}catch(e){return at.error=e,at}}function x(t,e,n,r){try{t.call(e,n,r)}catch(o){return o}}function k(t,e,n){X(function(t){var r=!1,o=x(n,e,function(n){r||(r=!0,e!==n?A(t,n):B(t,n))},function(e){r||(r=!0,C(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&o&&(r=!0,C(t,o))},t)}function S(t,e){e._state===ct?B(t,e._result):e._state===ut?C(t,e._result):P(e,void 0,function(e){A(t,e)},function(e){C(t,e)})}function O(t,e,n){e.constructor===t.constructor&&n===ot&&constructor.resolve===it?S(t,e):n===at?C(t,at.error):void 0===n?B(t,e):c(n)?k(t,e,n):B(t,e)}function A(t,e){t===e?C(t,w()):s(e)?O(t,e,E(e)):B(t,e)}function T(t){t._onerror&&t._onerror(t._result),I(t)}function B(t,e){t._state===st&&(t._result=e,t._state=ct,0!==t._subscribers.length&&X(I,t))}function C(t,e){t._state===st&&(t._state=ut,t._result=e,X(T,t))}function P(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+ct]=n,o[i+ut]=r,0===i&&t._state&&X(I,t)}function I(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r,o,i=t._result,s=0;s<e.length;s+=3)r=e[s],o=e[s+n],r?M(n,r,o,i):o(i);t._subscribers.length=0}}function R(){this.error=null}function j(t,e){try{return t(e)}catch(n){return ft.error=n,ft}}function M(t,e,n,r){var o,i,s,u,a=c(n);if(a){if(o=j(n,r),o===ft?(u=!0,i=o.error,o=null):s=!0,e===o)return void C(e,b())}else o=r,s=!0;e._state!==st||(a&&s?A(e,o):u?C(e,i):t===ct?B(e,o):t===ut&&C(e,o))}function U(t,e){try{e(function(e){A(t,e)},function(e){C(t,e)})}catch(n){C(t,n)}}function L(t){return new vt(this,t).promise}function N(t){function e(t){A(o,t)}function n(t){C(o,t)}var r=this,o=new r(_);if(!V(t))return C(o,new TypeError("You must pass an array to race.")),o;for(var i=t.length,s=0;o._state===st&&i>s;s++)P(r.resolve(t[s]),void 0,e,n);return o}function D(t){var e=this,n=new e(_);return C(n,t),n}function z(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function F(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function q(t){this._id=dt++,this._state=void 0,this._result=void 0,this._subscribers=[],_!==t&&("function"!=typeof t&&z(),this instanceof q?U(this,t):F())}function H(t,e){this._instanceConstructor=t,this.promise=new t(_),Array.isArray(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?B(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&B(this.promise,this._result))):C(this.promise,this._validationError())}function Y(){var t;if("undefined"!=typeof o)t=o;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=t.Promise;(!n||"[object Promise]"!==Object.prototype.toString.call(n.resolve())||n.cast)&&(t.Promise=yt)}var J;J=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var K,G,W,V=J,$=0,X=function(t,e){rt[$]=t,rt[$+1]=e,$+=2,2===$&&(G?G(y):W())},Z="undefined"!=typeof window?window:void 0,Q=Z||{},tt=Q.MutationObserver||Q.WebKitMutationObserver,et="undefined"!=typeof t&&"[object process]"==={}.toString.call(t),nt="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,rt=new Array(1e3);W=et?f():tt?l():nt?p():void 0===Z?v():d();var ot=g,it=m,st=void 0,ct=1,ut=2,at=new R,ft=new R,ht=L,lt=N,pt=D,dt=0,yt=q;q.all=ht,q.race=lt,q.resolve=it,q.reject=pt,q._setScheduler=u,q._setAsap=a,q._asap=X,q.prototype={constructor:q,then:ot,"catch":function(t){return this.then(null,t)}};var vt=H;H.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},H.prototype._enumerate=function(){for(var t=this.length,e=this._input,n=0;this._state===st&&t>n;n++)this._eachEntry(e[n],n)},H.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===it){var o=E(t);if(o===ot&&t._state!==st)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(n===yt){var i=new n(_);O(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new n(function(e){e(t)}),e)}else this._willSettleAt(r(t),e)},H.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===st&&(this._remaining--,t===ut?C(r,n):this._result[e]=n),0===this._remaining&&B(r,this._result)},H.prototype._willSettleAt=function(t,e){var n=this;P(t,void 0,function(t){n._settledAt(ct,e,t)},function(t){n._settledAt(ut,e,t)})};var gt=Y,mt={Promise:yt,polyfill:gt};n(87).amd?(r=function(){return mt}.call(e,n,e,i),!(void 0!==r&&(i.exports=r))):"undefined"!=typeof i&&i.exports?i.exports=mt:"undefined"!=typeof this&&(this.ES6Promise=mt),gt()}).call(this)}).call(e,n(73),function(){return this}(),n(85)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e,n){"use strict";var r=n(84).Promise;e["pubsub-js"]=function(){var t=n(89);return{connect:function(e){var n=t.subscribe(e.id,function(t,n){e.message(n)});return"function"==typeof e.callback&&e.callback(),n},disconnect:function(e){t.unsubscribe(e)},send:function(e,n){t.publish(e,n)}}},e.pubnub=function(t){var e;if("undefined"!=typeof window){if("undefined"==typeof window.PUBNUB)throw new Error("Please load pubnub first in the browser");e=window.PUBNUB}else e=n(90);var o=e.init(t);return{connect:function(t){return o.subscribe({channel:t.id,message:t.message,connect:t.callback}),t.id},disconnect:function(t){o.unsubscribe(t)},send:function(t,e){return new r(function(n,r){o.publish({channel:t,message:e,callback:n})})}}},e["default"]=e["pubsub-js"]},function(t,e,n){var r,o,i;!function(n,s){"use strict";o=[e],r=s,i="function"==typeof r?r.apply(e,o):r,!(void 0!==i&&(t.exports=i));var c={};n.PubSub=c,s(c)}("object"==typeof window&&window||this,function(t){"use strict";function e(t){var e;for(e in t)if(t.hasOwnProperty(e))return!0;return!1}function n(t){return function(){throw t}}function r(t,e,r){try{t(e,r)}catch(o){setTimeout(n(o),0)}}function o(t,e,n){t(e,n)}function i(t,e,n,i){var s,c=a[e],u=i?o:r;if(a.hasOwnProperty(e))for(s in c)c.hasOwnProperty(s)&&u(c[s],t,n)}function s(t,e,n){return function(){var r=String(t),o=r.lastIndexOf(".");for(i(t,t,e,n);-1!==o;)r=r.substr(0,o),o=r.lastIndexOf("."),i(t,r,e,n)}}function c(t){for(var n=String(t),r=Boolean(a.hasOwnProperty(n)&&e(a[n])),o=n.lastIndexOf(".");!r&&-1!==o;)n=n.substr(0,o),o=n.lastIndexOf("."),r=Boolean(a.hasOwnProperty(n)&&e(a[n]));return r}function u(t,e,n,r){var o=s(t,e,r),i=c(t);return i?(n===!0?o():setTimeout(o,0),!0):!1}var a={},f=-1;t.publish=function(e,n){return u(e,n,!1,t.immediateExceptions)},t.publishSync=function(e,n){return u(e,n,!0,t.immediateExceptions)},t.subscribe=function(t,e){if("function"!=typeof e)return!1;a.hasOwnProperty(t)||(a[t]={});var n="uid_"+String(++f);return a[t][n]=e,n},t.clearAllSubscriptions=function(){a={}},t.clearSubscriptions=function(t){var e;for(e in a)a.hasOwnProperty(e)&&0===e.indexOf(t)&&delete a[e]},t.unsubscribe=function(t){var e,n,r,o="string"==typeof t&&a.hasOwnProperty(t),i=!o&&"string"==typeof t,s="function"==typeof t,c=!1;if(o)return void delete a[t];for(e in a)if(a.hasOwnProperty(e)){if(n=a[e],i&&n[t]){delete n[t],c=t;break}if(s)for(r in n)n.hasOwnProperty(r)&&n[r]===t&&(delete n[r],c=!0)}return c}})},function(t,e){!function(){function o(){return"x"+ ++j+ +new Date}function i(){return+new Date}function s(t,e){var n=t.join(H),r=[];return e?(p(e,function(t,e){var n="object"==typeof e?JSON.stringify(e):e;"undefined"!=typeof e&&null!=e&&v(n).length>0&&r.push(t+"="+v(n))}),n+="?"+r.join(Y)):n}function c(t,e){var n,r=0,o=function(){r+e>i()?(clearTimeout(n),n=setTimeout(o,e)):(r=i(),t())};return o}function u(t,e){var n=[];return p(t||[],function(t){e(t)&&n.push(t)}),n}function a(t,e){return t.replace(W,function(t,n){return e[n]||t})}function f(t,e){return setTimeout(t,e)}function h(t){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"==t?e:3&e|8;return n.toString(16)});return t&&t(e),e}function l(t){return!!t&&"string"!=typeof t&&(Array.isArray&&Array.isArray(t)||"number"==typeof t.length)}function p(t,e){if(t&&e)if(l(t))for(var n=0,r=t.length;r>n;)e.call(t[n],t[n],n++);else for(var n in t)t.hasOwnProperty&&t.hasOwnProperty(n)&&e.call(t[n],n,t[n])}function d(t,e){var n=[];return p(t||[],function(t,r){n.push(e(t,r))}),n}function y(t){return encodeURIComponent(t).replace(/[!'()*~]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function v(t){return encodeURIComponent(t)}function g(t,e){var n=[];return p(t,function(t,r){e?t.search("-pnpres")<0&&r.subscribed&&n.push(t):r.subscribed&&n.push(t)}),n.sort()}function m(t,e){var n=[];return p(t,function(t,r){e?t.search("-pnpres")<0&&r.subscribed&&n.push(t):r.subscribed&&n.push(t)}),n.sort()}function _(){f(function(){M||(M=1,p(U,function(t){t()}))},q)}function w(t){return msg=t||{apns:{}},msg.getPubnubMessage=function(){var t={};if(Object.keys(msg.apns).length){t.pn_apns={aps:{alert:msg.apns.alert,badge:msg.apns.badge}};for(var e in msg.apns)t.pn_apns[e]=msg.apns[e];var n=["badge","alert"];for(var e in n)delete t.pn_apns[n[e]]}msg.gcm&&(t.pn_gcm={data:msg.gcm});for(var e in msg)t[e]=msg[e];var r=["apns","gcm","publish","channel","callback","error"];for(var e in r)delete t[r[e]];return t},msg.publish=function(){var t=msg.getPubnubMessage();msg.pubnub&&msg.channel&&msg.pubnub.publish({message:t,channel:msg.channel,callback:msg.callback,error:msg.error})},msg}function b(t){function e(t){return t||(t={}),p(It,function(e,n){e in t||(t[e]=n)}),t}function r(t){var e=[];return p(t,function(t,n){e.push(t)}),e}function w(t){return r(t).sort()}function b(t){var e="",n=w(t);for(var r in n){var o=n[r];e+=o+"="+y(t[o]),r!=n.length-1&&(e+="&")}return e}function E(t,e,n){var r=!1;if("undefined"==typeof t)return e;if("number"==typeof t)r=t>J||0==t?!1:!0;else{if("boolean"==typeof t)return t?K:0;r=!0}return r?(n&&n("Presence Heartbeat value invalid. Valid range ( x > "+J+" or x = 0). Current Value : "+(e||J)),e||J):t}function x(t,e){return Yt.encrypt(t,e||Lt)||t}function S(t,e){return Yt.decrypt(t,e||Lt)||Yt.decrypt(t,Lt)||t}function O(){return clearTimeout(St),!At||At>=500||1>At||!g(Et,!0).length&&!m(xt,!0).length?void(Tt=!1):(Tt=!0,void Jt.presence_heartbeat({callback:function(t){St=f(O,At*q)},error:function(t){Rt&&Rt("Presence Heartbeat unable to reach Pubnub servers."+JSON.stringify(t)),St=f(O,At*q)}}))}function A(){!Tt&&O()}function T(t){if(Bt){if(!pt.length)return}else{if(t&&(pt.sending=0),pt.sending||!pt.length)return;pt.sending=1}Pt(pt.shift())}function B(t){var e=0;return p(m(xt),function(n){var r=xt[n];r&&(e++,(t||function(){})(r))}),e}function C(t){var e=0;return p(g(Et),function(n){var r=Et[n];r&&(e++,(t||function(){})(r))}),e}function P(t,e,n){if("object"==typeof t){if(t.error){var r={};return t.message&&(r.message=t.message),t.payload&&(r.payload=t.payload),void(n&&n(r))}if(t.payload)return void(t.next_page?e&&e(t.payload,t.next_page):e&&e(t.payload))}e&&e(t)}function I(t,e){if("object"==typeof t&&t.error){var n={};return t.message&&(n.message=t.message),t.payload&&(n.payload=t.payload),void(e&&e(n))}e&&e(t)}function R(t,n,r,o){var n=t.callback||n,i=t.error||Rt,s=Mt();o=o||{},o.auth||(o.auth=t.auth_key||it);var c=[ft,"v1","channel-registration","sub-key",ot];c.push.apply(c,r),s&&(o.callback=s),Pt({callback:s,data:e(o),success:function(t){P(t,n,i)},fail:function(t){I(t,i)},url:c})}function j(){jt()||H(1,{error:"Offline. Please check your network settings. "}),$&&clearTimeout($),$=f(j,q)}function D(){et&&Jt.time(function(t){W(function(){},t),t||H(1,{error:"Heartbeat failed to connect to Pubnub Servers.Please check your network settings."}),X&&clearTimeout(X),X=f(D,tt)})}function H(t,e){mt&&mt(t,e),mt=null,clearTimeout($),clearTimeout(X)}function Y(t){var e=i()-yt;return e-t/1e4}function W(t,e){function n(e){if(e){var n=e/1e4,o=(i()-r)/2;yt=i()-(n+o),t&&t(yt)}}var r=i();e&&n(e)||Jt.time(n)}var $,X,Z=+t.windowing||N,Q=(+t.timeout||z)*q,tt=(+t.keepalive||F)*q,et=t.timecheck||0,nt=t.noleave||0,rt=t.publish_key,ot=t.subscribe_key,it=t.auth_key||"",st=t.secret_key||"",ct=t.hmac_SHA256,ut=t.ssl?"s":"",at="http"+ut+"://"+(t.origin||"pubsub.pubnub.com"),ft=V(at),ht=V(at),lt=function(){},pt=[],dt=!0,yt=0,vt=0,gt=0,mt=0,_t=t.restore||0,wt=0,bt=!1,Et={},xt={},kt={},St=null,Ot=E(t.heartbeat||t.pnexpires||0,t.error),At=t.heartbeat_interval||Ot/2-1,Tt=!1,Bt=t.no_wait_for_pending,Ct=t["compatible_3.5"]||!1,Pt=t.xdr,It=t.params||{},Rt=t.error||function(){},jt=t._is_online||function(){return 1},Mt=t.jsonp_cb||function(){return 0},Ut=t.db||{get:function(){},set:function(){}},Lt=t.cipher_key,Nt=t.uuid||!t.unique_uuid&&Ut&&Ut.get(ot+"uuid")||"",Dt=t.instance_id||!1,zt="",Ft=t.shutdown,qt="undefined"!=typeof t.use_send_beacon?t.use_send_beacon:!0,Ht=qt?t.sendBeacon:null;2===Ot&&(At=1);var Yt=t.crypto_obj||{encrypt:function(t,e){return t},decrypt:function(t,e){return t}},Jt={LEAVE:function(t,n,r,o,i){var c,u,a={uuid:Nt,auth:r||it},f=V(at),o=o||function(){},h=i||function(){},l=Mt();if(t.indexOf(L)>0)return!0;if(Ct){if(!ut)return!1;if("0"==l)return!1}return nt?!1:("0"!=l&&(a.callback=l),Dt&&(a.instanceid=zt),c=[f,"v2","presence","sub_key",ot,"channel",v(t),"leave"],u=e(a),Ht&&(url_string=s(c,u),Ht(url_string))?(o&&o({status:200,action:"leave",message:"OK",service:"Presence"}),!0):(Pt({blocking:n||ut,callback:l,data:u,success:function(t){P(t,o,h)},fail:function(t){I(t,h)},url:c}),!0))},LEAVE_GROUP:function(t,n,r,o,i){var c,u,a={uuid:Nt,auth:r||it},f=V(at),o=o||function(){},h=i||function(){},l=Mt();if(t.indexOf(L)>0)return!0;if(Ct){if(!ut)return!1;if("0"==l)return!1}return nt?!1:("0"!=l&&(a.callback=l),t&&t.length>0&&(a["channel-group"]=t),Dt&&(a.instanceid=zt),c=[f,"v2","presence","sub_key",ot,"channel",v(","),"leave"],u=e(a),Ht&&(url_string=s(c,u),Ht(url_string))?(o&&o({status:200,action:"leave",message:"OK",service:"Presence"}),!0):(Pt({blocking:n||ut,callback:l,data:u,success:function(t){P(t,o,h)},fail:function(t){I(t,h)},url:c}),!0))},set_resumed:function(t){bt=t},get_cipher_key:function(){return Lt},set_cipher_key:function(t){Lt=t},raw_encrypt:function(t,e){return x(t,e)},raw_decrypt:function(t,e){return S(t,e)},get_heartbeat:function(){return Ot},set_heartbeat:function(t,e){Ot=E(t,Ot,Rt),At=e||Ot/2-1,2==Ot&&(At=1),lt(),O()},get_heartbeat_interval:function(){return At},set_heartbeat_interval:function(t){At=t,O()},get_version:function(){return G},getGcmMessageObject:function(t){return{data:t}},getApnsMessageObject:function(t){var e={aps:{badge:1,alert:""}};for(k in t)k[e]=t[k];return e},newPnMessage:function(){var t={};gcm&&(t.pn_gcm=gcm),apns&&(t.pn_apns=apns);for(k in n)t[k]=n[k];return t},_add_param:function(t,e){It[t]=e},channel_group:function(t,e){var n,r,o=t.channel_group,e=e||t.callback,i=t.channels||t.channel,s=t.cloak,c=[],u={},a=t.mode||"add";if(o){var f=o.split(":");f.length>1?(n="*"===f[0]?null:f[0],r=f[1]):r=f[0]}n&&c.push("namespace")&&c.push(v(n)),c.push("channel-group"),r&&"*"!==r&&c.push(r),i?(l(i)&&(i=i.join(",")),u[a]=i,u.cloak=dt?"true":"false"):"remove"===a&&c.push("remove"),"undefined"!=typeof s&&(u.cloak=s?"true":"false"),R(t,e,c,u)},channel_group_list_groups:function(t,e){var n;n=t.namespace||t.ns||t.channel_group||null,n&&(t.channel_group=n+":*"),Jt.channel_group(t,e)},channel_group_list_channels:function(t,e){return t.channel_group?void Jt.channel_group(t,e):Rt("Missing Channel Group")},channel_group_remove_channel:function(t,e){return t.channel_group?t.channel||t.channels?(t.mode="remove",void Jt.channel_group(t,e)):Rt("Missing Channel"):Rt("Missing Channel Group")},channel_group_remove_group:function(t,e){return t.channel_group?t.channel?Rt("Use channel_group_remove_channel if you want to remove a channel from a group."):(t.mode="remove",void Jt.channel_group(t,e)):Rt("Missing Channel Group")},channel_group_add_channel:function(t,e){return t.channel_group?t.channel||t.channels?void Jt.channel_group(t,e):Rt("Missing Channel"):Rt("Missing Channel Group")},channel_group_cloak:function(t,e){return"undefined"==typeof t.cloak?void e(dt):(dt=t.cloak,void Jt.channel_group(t,e))},channel_group_list_namespaces:function(t,e){var n=["namespace"];R(t,e,n)},channel_group_remove_namespace:function(t,e){var n=["namespace",t.namespace,"remove"];R(t,e,n)},history:function(t,n){var n=t.callback||n,r=t.count||t.limit||100,o=t.reverse||"false",i=t.error||function(){},s=t.auth_key||it,c=t.cipher_key,u=t.channel,a=t.channel_group,f=t.start,h=t.end,l=t.include_token,p=t.string_message_token||!1,d={},y=Mt();return u||a?n?ot?(d.stringtoken="true",d.count=r,d.reverse=o,d.auth=s,a&&(d["channel-group"]=a,u||(u=",")),y&&(d.callback=y),f&&(d.start=f),h&&(d.end=h),l&&(d.include_token="true"),p&&(d.string_message_token="true"),void Pt({callback:y,data:e(d),success:function(t){if("object"==typeof t&&t.error)return void i({message:t.message,payload:t.payload});for(var e=t[0],r=[],o=0;o<e.length;o++)if(l){var s=S(e[o].message,c),u=e[o].timetoken;try{r.push({message:JSON.parse(s),timetoken:u})}catch(a){r.push({message:s,timetoken:u})}}else{var s=S(e[o],c);try{r.push(JSON.parse(s))}catch(a){r.push(s)}}n([r,t[1],t[2]])},fail:function(t){I(t,i)},url:[ft,"v2","history","sub-key",ot,"channel",v(u)]})):Rt("Missing Subscribe Key"):Rt("Missing Callback"):Rt("Missing Channel")},replay:function(t,n){var r,n=n||t.callback||function(){},o=t.auth_key||it,i=t.source,s=t.destination,c=t.stop,u=t.start,a=t.end,f=t.reverse,h=t.limit,l=Mt(),p={};return i?s?rt?ot?("0"!=l&&(p.callback=l),c&&(p.stop="all"),f&&(p.reverse="true"),u&&(p.start=u),a&&(p.end=a),h&&(p.count=h),p.auth=o,r=[ft,"v1","replay",rt,ot,i,s],void Pt({callback:l,success:function(t){P(t,n,err)},fail:function(){n([0,"Disconnected"])},url:r,data:e(p)})):Rt("Missing Subscribe Key"):Rt("Missing Publish Key"):Rt("Missing Destination Channel"):Rt("Missing Source Channel")},auth:function(t){it=t,lt()},time:function(t){var n=Mt(),r={uuid:Nt,auth:it};Dt&&(r.instanceid=zt),Pt({callback:n,data:e(r),url:[ft,"time",n],success:function(e){t(e[0])},fail:function(){t(0)}})},publish:function(t,n){var r=t.message;if(!r)return Rt("Missing Message");var o,i,n=n||t.callback||r.callback||t.success||function(){},s=t.channel||r.channel,c=t.auth_key||it,u=t.cipher_key,a=t.error||r.error||function(){},f=t.post||!1,h="store_in_history"in t?t.store_in_history:!0,l=Mt(),p="push";return t.prepend&&(p="unshift"),s?rt?ot?(r.getPubnubMessage&&(r=r.getPubnubMessage()),r=JSON.stringify(x(r,u)),i=[ft,"publish",rt,ot,0,v(s),l,v(r)],o={uuid:Nt,auth:c},h||(o.store="0"),Dt&&(o.instanceid=zt),pt[p]({callback:l,url:i,data:e(o),fail:function(t){I(t,a),T(1)},success:function(t){P(t,n,a),T(1)},mode:f?"POST":"GET"}),void T()):Rt("Missing Subscribe Key"):Rt("Missing Publish Key"):Rt("Missing Channel")},unsubscribe:function(t,e){var n=t.channel,r=t.channel_group,o=t.auth_key||it,e=e||t.callback||function(){},i=t.error||function(){};if(wt=0,_t=1,!n&&!r)return Rt("Missing Channel or Channel Group");if(!ot)return Rt("Missing Subscribe Key");if(n){var s=l(n)?n:(""+n).split(","),c=[],u=[];if(p(s,function(t){Et[t]&&c.push(t)}),0==c.length)return void e({action:"leave"});p(c,function(t){u.push(t+L)}),p(c.concat(u),function(t){t in Et&&(Et[t]=0),t in kt&&delete kt[t]});var a=!0;M&&(a=Jt.LEAVE(c.join(","),0,o,e,i)),a||e({action:"leave"})}if(r){var f=l(r)?r:(""+r).split(","),h=[],d=[];if(p(f,function(t){xt[t]&&h.push(t)}),0==h.length)return void e({action:"leave"});p(h,function(t){d.push(t+L)}),p(h.concat(d),function(t){t in xt&&(xt[t]=0),t in kt&&delete kt[t]});var a=!0;M&&(a=Jt.LEAVE_GROUP(h.join(","),0,o,e,i)),a||e({action:"leave"})}lt()},subscribe:function(t,n){function r(t){t?f(lt,k):(ft=V(at,1),ht=V(at,1),f(function(){Jt.time(r)},q)),C(function(e){return t&&e.disconnected?(e.disconnected=0,e.reconnect(e.name)):void(t||e.disconnected||(e.disconnected=1,e.disconnect(e.name)))}),B(function(e){return t&&e.disconnected?(e.disconnected=0,e.reconnect(e.name)):void(t||e.disconnected||(e.disconnected=1,e.disconnect(e.name)))})}function o(){var t=Mt(),n=g(Et).join(","),i=m(xt).join(",");if(n||i){n||(n=","),H();var s=e({uuid:Nt,auth:it});i&&(s["channel-group"]=i);var c=JSON.stringify(kt);c.length>2&&(s.state=JSON.stringify(kt)),Ot&&(s.heartbeat=Ot),Dt&&(s.instanceid=zt),A(),mt=Pt({timeout:x,callback:t,fail:function(t){t&&t.error&&t.service?(I(t,l),r(1)):Jt.time(function(e){!e&&I(t,l),r(e)})},data:e(s),url:[ht,"subscribe",ot,v(n),t,wt],success:function(t){if(!t||"object"==typeof t&&"error"in t&&t.error)return l(t.error),f(lt,q);if(y(t[1]),wt=!wt&&_t&&Ut.get(ot)||t[1],C(function(t){t.connected||(t.connected=1,t.connect(t.name))}),B(function(t){t.connected||(t.connected=1,t.connect(t.name))}),bt&&!_t)return wt=0,bt=!1,Ut.set(ot,0),void f(o,k);b&&(wt=1e4,b=0),Ut.set(ot,t[1]);var e=function(){var e="",n="";t.length>3?(e=t[3],n=t[2]):e=t.length>2?t[2]:d(g(Et),function(e){return d(Array(t[0].length).join(",").split(","),function(){return e})}).join(",");var r=e.split(","),o=n?n.split(","):[];return function(){var t=r.shift()||gt,e=o.shift(),n={};e?(t&&t.indexOf("-pnpres")>=0&&e.indexOf("-pnpres")<0&&(e+="-pnpres"),n=xt[e]||Et[e]||{callback:function(){}}):n=Et[t];var i=[n.callback||vt,t.split(L)[0]];return e&&i.push(e.split(L)[0]),i}}(),n=Y(+t[1]);p(t[0],function(r){var o=e(),i=S(r,Et[o[1]]?Et[o[1]].cipher_key:null);o[0]&&o[0](i,t,o[2]||o[1],n,o[1])}),f(o,k)}})}}var s=t.channel,c=t.channel_group,n=n||t.callback,n=n||t.message,u=t.connect||function(){},a=t.reconnect||function(){},h=t.disconnect||function(){},l=t.error||l||function(){},y=t.idle||function(){},_=t.presence||0,w=t.noheresync||0,b=t.backfill||0,E=t.timetoken||0,x=t.timeout||Q,k=t.windowing||Z,O=t.state,T=t.heartbeat||t.pnexpires,P=t.heartbeat_interval,R=t.restore||_t;return it=t.auth_key||it,_t=R,wt=E,s||c?n?ot?((T||0===T||P||0===P)&&Jt.set_heartbeat(T,P),s&&p((s.join?s.join(","):""+s).split(","),function(r){var o=Et[r]||{};Et[gt=r]={name:r,connected:o.connected,disconnected:o.disconnected,subscribed:1,callback:vt=n,cipher_key:t.cipher_key,connect:u,disconnect:h,reconnect:a},O&&(r in O?kt[r]=O[r]:kt[r]=O),_&&(Jt.subscribe({channel:r+L,callback:_,restore:R}),o.subscribed||w||Jt.here_now({channel:r,data:e({uuid:Nt,auth:it}),callback:function(t){p("uuids"in t?t.uuids:[],function(e){_({action:"join",uuid:e,timestamp:Math.floor(i()/1e3),occupancy:t.occupancy||1},t,r)})}}))}),c&&p((c.join?c.join(","):""+c).split(","),function(r){var o=xt[r]||{};xt[r]={name:r,connected:o.connected,disconnected:o.disconnected,subscribed:1,callback:vt=n,cipher_key:t.cipher_key,connect:u,disconnect:h,reconnect:a},_&&(Jt.subscribe({channel_group:r+L,callback:_,restore:R,auth_key:it}),o.subscribed||w||Jt.here_now({channel_group:r,data:e({uuid:Nt,auth:it}),callback:function(t){p("uuids"in t?t.uuids:[],function(e){_({action:"join",uuid:e,timestamp:Math.floor(i()/1e3),occupancy:t.occupancy||1},t,r)})}}))}),lt=function(){H(),f(o,k)},M?void lt():U.push(lt)):Rt("Missing Subscribe Key"):Rt("Missing Callback"):Rt("Missing Channel")},here_now:function(t,n){var n=t.callback||n,r=t.debug,o=t.error||function(){},i=t.auth_key||it,s=t.channel,c=t.channel_group,u=Mt(),a="uuids"in t?t.uuids:!0,f=t.state,h={uuid:Nt,auth:i};if(a||(h.disable_uuids=1),f&&(h.state=1),!n)return Rt("Missing Callback");if(!ot)return Rt("Missing Subscribe Key");var l=[ft,"v2","presence","sub_key",ot];s&&l.push("channel")&&l.push(v(s)),"0"!=u&&(h.callback=u),c&&(h["channel-group"]=c,!s&&l.push("channel")&&l.push(",")),Dt&&(h.instanceid=zt),Pt({callback:u,data:e(h),success:function(t){P(t,n,o)},fail:function(t){I(t,o)},debug:r,url:l})},where_now:function(t,n){var n=t.callback||n,r=t.error||function(){},o=t.auth_key||it,i=Mt(),s=t.uuid||Nt,c={auth:o};return n?ot?("0"!=i&&(c.callback=i),Dt&&(c.instanceid=zt),void Pt({callback:i,data:e(c),success:function(t){P(t,n,r)},fail:function(t){I(t,r)},url:[ft,"v2","presence","sub_key",ot,"uuid",v(s)]})):Rt("Missing Subscribe Key"):Rt("Missing Callback")},state:function(t,n){var r,n=t.callback||n||function(t){},o=t.error||function(){},i=t.auth_key||it,s=Mt(),c=t.state,u=t.uuid||Nt,a=t.channel,f=t.channel_group,h=e({auth:i});return ot?u?a||f?("0"!=s&&(h.callback=s),"undefined"!=typeof a&&Et[a]&&Et[a].subscribed&&c&&(kt[a]=c),"undefined"!=typeof f&&xt[f]&&xt[f].subscribed&&(c&&(kt[f]=c),h["channel-group"]=f,a||(a=",")),h.state=JSON.stringify(c),Dt&&(h.instanceid=zt),r=c?[ft,"v2","presence","sub-key",ot,"channel",a,"uuid",u,"data"]:[ft,"v2","presence","sub-key",ot,"channel",a,"uuid",v(u)],void Pt({callback:s,data:e(h),success:function(t){P(t,n,o)},fail:function(t){I(t,o)},url:r})):Rt("Missing Channel"):Rt("Missing UUID"):Rt("Missing Subscribe Key")},grant:function(t,n){var n=t.callback||n,r=t.error||function(){},o=t.channel||t.channels,i=t.channel_group,s=Mt(),c=t.ttl,u=t.read?"1":"0",a=t.write?"1":"0",f=t.manage?"1":"0",h=t.auth_key||t.auth_keys;if(!n)return Rt("Missing Callback");if(!ot)return Rt("Missing Subscribe Key");if(!rt)return Rt("Missing Publish Key");if(!st)return Rt("Missing Secret Key");var p=Math.floor((new Date).getTime()/1e3),d=ot+"\n"+rt+"\ngrant\n",y={w:a,r:u,timestamp:p};t.manage&&(y.m=f),l(o)&&(o=o.join(",")),l(h)&&(h=h.join(",")),"undefined"!=typeof o&&null!=o&&o.length>0&&(y.channel=o),"undefined"!=typeof i&&null!=i&&i.length>0&&(y["channel-group"]=i),"0"!=s&&(y.callback=s),(c||0===c)&&(y.ttl=c),h&&(y.auth=h),y=e(y),h||delete y.auth,d+=b(y);var v=ct(d,st);v=v.replace(/\+/g,"-"),v=v.replace(/\//g,"_"),y.signature=v,Pt({callback:s,data:y,success:function(t){P(t,n,r)},fail:function(t){I(t,r)},url:[ft,"v1","auth","grant","sub-key",ot]})},mobile_gw_provision:function(t){var e,n,r=t.callback||function(){},o=t.auth_key||it,i=t.error||function(){},s=Mt(),c=t.channel,u=t.op,a=t.gw_type,f=t.device_id;return f?a?u?c?rt?ot?(n=[ft,"v1/push/sub-key",ot,"devices",f],e={uuid:Nt,auth:o,type:a},"add"==u?e.add=c:"remove"==u&&(e.remove=c),Dt&&(data.instanceid=zt),void Pt({callback:s,data:e,success:function(t){P(t,r,i)},fail:function(t){I(t,i)},url:n})):Rt("Missing Subscribe Key"):Rt("Missing Publish Key"):Rt("Missing gw destination Channel (channel)"):Rt("Missing GW Operation (op: add or remove)"):Rt("Missing GW Type (gw_type: gcm or apns)"):Rt("Missing Device ID (device_id)")},audit:function(t,n){var n=t.callback||n,r=t.error||function(){},o=t.channel,i=t.channel_group,s=t.auth_key,c=Mt();if(!n)return Rt("Missing Callback");if(!ot)return Rt("Missing Subscribe Key");if(!rt)return Rt("Missing Publish Key");if(!st)return Rt("Missing Secret Key");var u=Math.floor((new Date).getTime()/1e3),a=ot+"\n"+rt+"\naudit\n",f={timestamp:u};"0"!=c&&(f.callback=c),"undefined"!=typeof o&&null!=o&&o.length>0&&(f.channel=o),"undefined"!=typeof i&&null!=i&&i.length>0&&(f["channel-group"]=i),s&&(f.auth=s),f=e(f),s||delete f.auth,a+=b(f);var h=ct(a,st);h=h.replace(/\+/g,"-"),h=h.replace(/\//g,"_"),f.signature=h,Pt({callback:c,data:f,success:function(t){P(t,n,r)},fail:function(t){I(t,r)},url:[ft,"v1","auth","audit","sub-key",ot]})},revoke:function(t,e){t.read=!1,t.write=!1,Jt.grant(t,e)},set_uuid:function(t){Nt=t,lt()},get_uuid:function(){return Nt},isArray:function(t){return l(t)},get_subscribed_channels:function(){return g(Et,!0)},presence_heartbeat:function(t){var n=t.callback||function(){},r=t.error||function(){},o=Mt(),i={uuid:Nt,auth:it},s=JSON.stringify(kt);s.length>2&&(i.state=JSON.stringify(kt)),Ot>0&&320>Ot&&(i.heartbeat=Ot),"0"!=o&&(i.callback=o);var c=v(g(Et,!0).join(",")),u=m(xt,!0).join(",");c||(c=","),u&&(i["channel-group"]=u),Dt&&(i.instanceid=zt),Pt({callback:o,data:e(i),url:[ft,"v2","presence","sub-key",ot,"channel",c,"heartbeat"],success:function(t){P(t,n,r)},fail:function(t){I(t,r)}})},stop_timers:function(){clearTimeout($),clearTimeout(X),clearTimeout(St)},shutdown:function(){Jt.stop_timers(),Ft&&Ft()},xdr:Pt,ready:_,db:Ut,uuid:h,map:d,each:p,"each-channel":C,grep:u,offline:function(){H(1,{message:"Offline. Please check your network settings."})},supplant:a,now:i,unique:o,updater:c};return Nt||(Nt=Jt.uuid()),zt||(zt=Jt.uuid()),Ut.set(ot+"uuid",Nt),$=f(j,q),X=f(D,tt),St=f(A,(At-3)*q),W(),Jt}function E(){function t(t){return r.SHA256(t).toString(r.enc.Hex)}function e(t){return t=t||{},t.hasOwnProperty("encryptKey")||(t.encryptKey=h.encryptKey),t.hasOwnProperty("keyEncoding")||(t.keyEncoding=h.keyEncoding),t.hasOwnProperty("keyLength")||(t.keyLength=h.keyLength),t.hasOwnProperty("mode")||(t.mode=h.mode),-1==u.indexOf(t.keyEncoding.toLowerCase())&&(t.keyEncoding=h.keyEncoding),-1==a.indexOf(parseInt(t.keyLength,10))&&(t.keyLength=h.keyLength),-1==f.indexOf(t.mode.toLowerCase())&&(t.mode=h.mode),t}function n(t,e){return"base64"==e.keyEncoding?r.enc.Base64.parse(t):"hex"==e.keyEncoding?r.enc.Hex.parse(t):t}function o(e,o){return e=n(e,o),o.encryptKey?r.enc.Utf8.parse(t(e).slice(0,32)):e}function i(t){return"ecb"==t.mode?r.mode.ECB:r.mode.CBC}function s(t){return"cbc"==t.mode?r.enc.Utf8.parse(c):null}var c="0123456789012345",u=["hex","utf8","base64","binary"],a=[128,256],f=["ecb","cbc"],h={encryptKey:!0,keyEncoding:"utf8",keyLength:256,mode:"cbc"};return{encrypt:function(t,n,c){if(!n)return t;c=e(c);var u=s(c),a=i(c),f=o(n,c),h=JSON.stringify(t),l=r.AES.encrypt(h,f,{iv:u,mode:a}).ciphertext,p=l.toString(r.enc.Base64);return p||t},decrypt:function(t,n,c){if(!n)return t;c=e(c);var u=s(c),a=i(c),f=o(n,c);try{var h=r.enc.Base64.parse(t),l=r.AES.decrypt({ciphertext:h},f,{iv:u,mode:a}).toString(r.enc.Utf8),p=JSON.parse(l);return p}catch(d){return}}}}function x(t){var e,n=function(){if(!o){o=1,clearTimeout(c);try{response=JSON.parse(e.responseText)}catch(t){return p(1)}h(response)}},r=0,o=0,i=t.timeout||D,c=f(function(){p(1)},i),u=t.data||{},a=t.fail||function(){},h=t.success||function(){},l=!0,p=function(t,n){r||(r=1,clearTimeout(c),e&&(e.onerror=e.onload=null,e.abort&&e.abort(),e=null),t&&a(n))};try{e="undefined"!=typeof XDomainRequest&&new XDomainRequest||new XMLHttpRequest,e.onerror=e.onabort=function(){p(1,e.responseText||{error:"Network Connection Error"})},e.onload=e.onloadend=n,e.onreadystatechange=function(){if(e&&4==e.readyState)switch(e.status){case 200:break;default:try{response=JSON.parse(e.responseText),p(1,response)}catch(t){return p(1,{status:e.status,payload:null,message:e.responseText})}return}},u.pnsdk=$,url=s(t.url,u),e.open("GET",url,l),l&&(e.timeout=i),e.send()}catch(d){return p(0),x(t)}return p}function S(t,e,n){p(t.split(","),function(t){var r=function(t){t||(t=window.event),n(t)||(t.cancelBubble=!0,t.returnValue=!1,t.preventDefault&&t.preventDefault(),
t.stopPropagation&&t.stopPropagation())};e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent?e.attachEvent("on"+t,r):e["on"+t]=r})}function O(t){console.error(t)}function A(t,e,n){return n?void t.setAttribute(e,n):t&&t.getAttribute&&t.getAttribute(e)}function T(t){return document.getElementById(t)}function B(t,e){var n=[];return p(t.split(/\s+/),function(t){p((e||document).getElementsByTagName(t),function(t){n.push(t)})}),n}function C(t,e){for(var n in e)if(e.hasOwnProperty(n))try{t.style[n]=e[n]+("|width|height|top|left|".indexOf(n)>0&&"number"==typeof e[n]?"px":"")}catch(r){}}function P(t){return document.createElement(t)}function I(t,e){var n=r.HmacSHA256(t,e);return n.toString(r.enc.Base64)}function R(t){t.db=X,t.xdr=x,t.error=t.error||O,t.hmac_SHA256=I,t.crypto_obj=E(),t.params={pnsdk:$},SELF=function(t){return R(t)};var e=b(t);for(var n in e)e.hasOwnProperty(n)&&(SELF[n]=e[n]);return SELF.init=SELF,SELF.$=T,SELF.attr=A,SELF.search=B,SELF.bind=S,SELF.css=C,SELF.create=P,SELF.crypto_obj=E(),"undefined"!=typeof window&&S("beforeunload",window,function(){return SELF["each-channel"](function(t){SELF.LEAVE(t.name,1)}),!0}),t.notest?SELF:("undefined"!=typeof window&&S("offline",window,SELF.offline),"undefined"!=typeof document&&S("offline",document,SELF.offline),SELF.ready(),SELF)}var j=1,M=!1,U=[],L="-pnpres",N=10,D=15e3,z=310,F=60,q=1e3,H="/",Y="&",J=5,K=30,G="'3.9.2'".replace(/'/g,""),W=/{([\w\-]+)}/g,V=function(){var t=20,e=Math.floor(Math.random()*t);return function(n,r){return n.indexOf("pubsub.")>0&&n.replace("pubsub","ps"+(r?h().split("-")[0]:++e<t?e:e=1))||n}}();"undefined"!=typeof t&&"undefined"!=typeof t.exports&&(t.exports={PN_API:b,unique:o,PNmessage:w,DEF_TIMEOUT:D,timeout:f,build_url:s,each:p,uuid:h,URLBIT:H});var j=1,$="PubNub-JS-Modern/3.9.2",X=function(){var t="undefined"!=typeof localStorage&&localStorage;return{get:function(e){try{return t?t.getItem(e):-1==document.cookie.indexOf(e)?null:((document.cookie||"").match(RegExp(e+"=([^;]+)"))||[])[1]||null}catch(n){return}},set:function(e,n){try{if(t)return t.setItem(e,n)&&0;document.cookie=e+"="+n+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(r){return}}}}();R.init=R,R.secure=R,R.crypto_obj=E(),PUBNUB=R({}),"undefined"!=typeof t&&(t.exports=R)||"undefined"!=typeof e&&(e.PUBNUB=R)||(PUBNUB=R)}(),function(){var t=PUBNUB.ws=function(e,n){if(!(this instanceof t))return new t(e,n);var r=this,e=r.url=e||"",o=(r.protocol=n||"Sec-WebSocket-Protocol",e.split("/")),i={ssl:"wss:"===o[0],origin:o[2],publish_key:o[3],subscribe_key:o[4],channel:o[5]};return r.CONNECTING=0,r.OPEN=1,r.CLOSING=2,r.CLOSED=3,r.CLOSE_NORMAL=1e3,r.CLOSE_GOING_AWAY=1001,r.CLOSE_PROTOCOL_ERROR=1002,r.CLOSE_UNSUPPORTED=1003,r.CLOSE_TOO_LARGE=1004,r.CLOSE_NO_STATUS=1005,r.CLOSE_ABNORMAL=1006,r.onclose=r.onerror=r.onmessage=r.onopen=r.onsend=function(){},r.binaryType="",r.extensions="",r.bufferedAmount=0,r.trasnmitting=!1,r.buffer=[],r.readyState=r.CONNECTING,e?(r.pubnub=PUBNUB.init(i),r.pubnub.setup=i,r.setup=i,void r.pubnub.subscribe({restore:!1,channel:i.channel,disconnect:r.onerror,reconnect:r.onopen,error:function(){r.onclose({code:r.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:!1})},callback:function(t){r.onmessage({data:t})},connect:function(){r.readyState=r.OPEN,r.onopen()}})):(r.readyState=r.CLOSED,r.onclose({code:r.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:!0}),r)};t.prototype.send=function(t){var e=this;e.pubnub.publish({channel:e.pubnub.setup.channel,message:t,callback:function(t){e.onsend({data:t})}})},t.prototype.close=function(){var t=this;t.pubnub.unsubscribe({channel:t.pubnub.setup.channel}),t.readyState=t.CLOSED,t.onclose({})}}();var r=r||function(t,e){var n={},r=n.lib={},o=function(){},i=r.Base={extend:function(t){o.prototype=this;var e=new o;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},s=r.WordArray=i.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:4*t.length},toString:function(t){return(t||u).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes;if(t=t.sigBytes,this.clamp(),r%4)for(var o=0;t>o;o++)e[r+o>>>2]|=(n[o>>>2]>>>24-8*(o%4)&255)<<24-8*((r+o)%4);else if(65535<n.length)for(o=0;t>o;o+=4)e[r+o>>>2]=n[o>>>2];else e.push.apply(e,n);return this.sigBytes+=t,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-8*(n%4),e.length=t.ceil(n/4)},clone:function(){var t=i.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n=[],r=0;e>r;r+=4)n.push(4294967296*t.random()|0);return new s.init(n,e)}}),c=n.enc={},u=c.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],r=0;t>r;r++){var o=e[r>>>2]>>>24-8*(r%4)&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,n=[],r=0;e>r;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-4*(r%8);return new s.init(n,e/2)}},a=c.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],r=0;t>r;r++)n.push(String.fromCharCode(e[r>>>2]>>>24-8*(r%4)&255));return n.join("")},parse:function(t){for(var e=t.length,n=[],r=0;e>r;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-8*(r%4);return new s.init(n,e)}},f=c.Utf8={stringify:function(t){try{return decodeURIComponent(escape(a.stringify(t)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(t){return a.parse(unescape(encodeURIComponent(t)))}},h=r.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=f.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,r=n.words,o=n.sigBytes,i=this.blockSize,c=o/(4*i),c=e?t.ceil(c):t.max((0|c)-this._minBufferSize,0);if(e=c*i,o=t.min(4*e,o),e){for(var u=0;e>u;u+=i)this._doProcessBlock(r,u);u=r.splice(0,e),n.sigBytes-=o}return new s.init(u,o)},clone:function(){var t=i.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});r.Hasher=h.extend({cfg:i.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new l.HMAC.init(t,n).finalize(e)}}});var l=n.algo={};return n}(Math);!function(t){for(var e=r,n=e.lib,o=n.WordArray,i=n.Hasher,n=e.algo,s=[],c=[],u=function(t){return 4294967296*(t-(0|t))|0},a=2,f=0;64>f;){var h;t:{h=a;for(var l=t.sqrt(h),p=2;l>=p;p++)if(!(h%p)){h=!1;break t}h=!0}h&&(8>f&&(s[f]=u(t.pow(a,.5))),c[f]=u(t.pow(a,1/3)),f++),a++}var d=[],n=n.SHA256=i.extend({_doReset:function(){this._hash=new o.init(s.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],s=n[3],u=n[4],a=n[5],f=n[6],h=n[7],l=0;64>l;l++){if(16>l)d[l]=0|t[e+l];else{var p=d[l-15],y=d[l-2];d[l]=((p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3)+d[l-7]+((y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10)+d[l-16]}p=h+((u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25))+(u&a^~u&f)+c[l]+d[l],y=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&o^r&i^o&i),h=f,f=a,a=u,u=s+p|0,s=i,i=o,o=r,r=p+y|0}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+s|0,n[4]=n[4]+u|0,n[5]=n[5]+a|0,n[6]=n[6]+f|0,n[7]=n[7]+h|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,o=8*e.sigBytes;return n[o>>>5]|=128<<24-o%32,n[(o+64>>>9<<4)+14]=t.floor(r/4294967296),n[(o+64>>>9<<4)+15]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=i._createHelper(n),e.HmacSHA256=i._createHmacHelper(n)}(Math),function(){var t=r,e=t.enc.Utf8;t.algo.HMAC=t.lib.Base.extend({init:function(t,n){t=this._hasher=new t.init,"string"==typeof n&&(n=e.parse(n));var r=t.blockSize,o=4*r;n.sigBytes>o&&(n=t.finalize(n)),n.clamp();for(var i=this._oKey=n.clone(),s=this._iKey=n.clone(),c=i.words,u=s.words,a=0;r>a;a++)c[a]^=1549556828,u[a]^=909522486;i.sigBytes=s.sigBytes=o,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher;return t=e.finalize(t),e.reset(),e.finalize(this._oKey.clone().concat(t))}})}(),function(){var t=r,e=t.lib.WordArray;t.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,r=this._map;t.clamp(),t=[];for(var o=0;n>o;o+=3)for(var i=(e[o>>>2]>>>24-8*(o%4)&255)<<16|(e[o+1>>>2]>>>24-8*((o+1)%4)&255)<<8|e[o+2>>>2]>>>24-8*((o+2)%4)&255,s=0;4>s&&n>o+.75*s;s++)t.push(r.charAt(i>>>6*(3-s)&63));if(e=r.charAt(64))for(;t.length%4;)t.push(e);return t.join("")},parse:function(t){var n=t.length,r=this._map,o=r.charAt(64);o&&(o=t.indexOf(o),-1!=o&&(n=o));for(var o=[],i=0,s=0;n>s;s++)if(s%4){var c=r.indexOf(t.charAt(s-1))<<2*(s%4),u=r.indexOf(t.charAt(s))>>>6-2*(s%4);o[i>>>2]|=(c|u)<<24-8*(i%4),i++}return e.create(o,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(t){function e(t,e,n,r,o,i,s){return t=t+(e&n|~e&r)+o+s,(t<<i|t>>>32-i)+e}function n(t,e,n,r,o,i,s){return t=t+(e&r|n&~r)+o+s,(t<<i|t>>>32-i)+e}function o(t,e,n,r,o,i,s){return t=t+(e^n^r)+o+s,(t<<i|t>>>32-i)+e}function i(t,e,n,r,o,i,s){return t=t+(n^(e|~r))+o+s,(t<<i|t>>>32-i)+e}for(var s=r,c=s.lib,u=c.WordArray,a=c.Hasher,c=s.algo,f=[],h=0;64>h;h++)f[h]=4294967296*t.abs(t.sin(h+1))|0;c=c.MD5=a.extend({_doReset:function(){this._hash=new u.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,r){for(var s=0;16>s;s++){var c=r+s,u=t[c];t[c]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}var s=this._hash.words,c=t[r+0],u=t[r+1],a=t[r+2],h=t[r+3],l=t[r+4],p=t[r+5],d=t[r+6],y=t[r+7],v=t[r+8],g=t[r+9],m=t[r+10],_=t[r+11],w=t[r+12],b=t[r+13],E=t[r+14],x=t[r+15],k=s[0],S=s[1],O=s[2],A=s[3],k=e(k,S,O,A,c,7,f[0]),A=e(A,k,S,O,u,12,f[1]),O=e(O,A,k,S,a,17,f[2]),S=e(S,O,A,k,h,22,f[3]),k=e(k,S,O,A,l,7,f[4]),A=e(A,k,S,O,p,12,f[5]),O=e(O,A,k,S,d,17,f[6]),S=e(S,O,A,k,y,22,f[7]),k=e(k,S,O,A,v,7,f[8]),A=e(A,k,S,O,g,12,f[9]),O=e(O,A,k,S,m,17,f[10]),S=e(S,O,A,k,_,22,f[11]),k=e(k,S,O,A,w,7,f[12]),A=e(A,k,S,O,b,12,f[13]),O=e(O,A,k,S,E,17,f[14]),S=e(S,O,A,k,x,22,f[15]),k=n(k,S,O,A,u,5,f[16]),A=n(A,k,S,O,d,9,f[17]),O=n(O,A,k,S,_,14,f[18]),S=n(S,O,A,k,c,20,f[19]),k=n(k,S,O,A,p,5,f[20]),A=n(A,k,S,O,m,9,f[21]),O=n(O,A,k,S,x,14,f[22]),S=n(S,O,A,k,l,20,f[23]),k=n(k,S,O,A,g,5,f[24]),A=n(A,k,S,O,E,9,f[25]),O=n(O,A,k,S,h,14,f[26]),S=n(S,O,A,k,v,20,f[27]),k=n(k,S,O,A,b,5,f[28]),A=n(A,k,S,O,a,9,f[29]),O=n(O,A,k,S,y,14,f[30]),S=n(S,O,A,k,w,20,f[31]),k=o(k,S,O,A,p,4,f[32]),A=o(A,k,S,O,v,11,f[33]),O=o(O,A,k,S,_,16,f[34]),S=o(S,O,A,k,E,23,f[35]),k=o(k,S,O,A,u,4,f[36]),A=o(A,k,S,O,l,11,f[37]),O=o(O,A,k,S,y,16,f[38]),S=o(S,O,A,k,m,23,f[39]),k=o(k,S,O,A,b,4,f[40]),A=o(A,k,S,O,c,11,f[41]),O=o(O,A,k,S,h,16,f[42]),S=o(S,O,A,k,d,23,f[43]),k=o(k,S,O,A,g,4,f[44]),A=o(A,k,S,O,w,11,f[45]),O=o(O,A,k,S,x,16,f[46]),S=o(S,O,A,k,a,23,f[47]),k=i(k,S,O,A,c,6,f[48]),A=i(A,k,S,O,y,10,f[49]),O=i(O,A,k,S,E,15,f[50]),S=i(S,O,A,k,p,21,f[51]),k=i(k,S,O,A,w,6,f[52]),A=i(A,k,S,O,h,10,f[53]),O=i(O,A,k,S,m,15,f[54]),S=i(S,O,A,k,u,21,f[55]),k=i(k,S,O,A,v,6,f[56]),A=i(A,k,S,O,x,10,f[57]),O=i(O,A,k,S,d,15,f[58]),S=i(S,O,A,k,b,21,f[59]),k=i(k,S,O,A,l,6,f[60]),A=i(A,k,S,O,_,10,f[61]),O=i(O,A,k,S,a,15,f[62]),S=i(S,O,A,k,g,21,f[63]);s[0]=s[0]+k|0,s[1]=s[1]+S|0,s[2]=s[2]+O|0,s[3]=s[3]+A|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,o=8*e.sigBytes;n[o>>>5]|=128<<24-o%32;var i=t.floor(r/4294967296);for(n[(o+64>>>9<<4)+15]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),n[(o+64>>>9<<4)+14]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),e.sigBytes=4*(n.length+1),this._process(),e=this._hash,n=e.words,r=0;4>r;r++)o=n[r],n[r]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8);return e},clone:function(){var t=a.clone.call(this);return t._hash=this._hash.clone(),t}}),s.MD5=a._createHelper(c),s.HmacMD5=a._createHmacHelper(c)}(Math),function(){var t=r,e=t.lib,n=e.Base,o=e.WordArray,e=t.algo,i=e.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:e.MD5,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n=this.cfg,r=n.hasher.create(),i=o.create(),s=i.words,c=n.keySize,n=n.iterations;s.length<c;){u&&r.update(u);var u=r.update(t).finalize(e);r.reset();for(var a=1;n>a;a++)u=r.finalize(u),r.reset();i.concat(u)}return i.sigBytes=4*c,i}});t.EvpKDF=function(t,e,n){return i.create(n).compute(t,e)}}(),r.lib.Cipher||function(t){var e=r,n=e.lib,o=n.Base,i=n.WordArray,s=n.BufferedBlockAlgorithm,c=e.enc.Base64,u=e.algo.EvpKDF,a=n.Cipher=s.extend({cfg:o.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,n){this.cfg=this.cfg.extend(n),this._xformMode=t,this._key=e,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(t){return{encrypt:function(e,n,r){return("string"==typeof n?y:d).encrypt(t,e,n,r)},decrypt:function(e,n,r){return("string"==typeof n?y:d).decrypt(t,e,n,r)}}}});n.StreamCipher=a.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var f=e.mode={},h=function(e,n,r){var o=this._iv;o?this._iv=t:o=this._prevBlock;for(var i=0;r>i;i++)e[n+i]^=o[i]},l=(n.BlockCipherMode=o.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}})).extend();l.Encryptor=l.extend({processBlock:function(t,e){var n=this._cipher,r=n.blockSize;h.call(this,t,e,r),n.encryptBlock(t,e),this._prevBlock=t.slice(e,e+r)}}),l.Decryptor=l.extend({processBlock:function(t,e){var n=this._cipher,r=n.blockSize,o=t.slice(e,e+r);n.decryptBlock(t,e),h.call(this,t,e,r),this._prevBlock=o}}),f=f.CBC=l,l=(e.pad={}).Pkcs7={pad:function(t,e){for(var n=4*e,n=n-t.sigBytes%n,r=n<<24|n<<16|n<<8|n,o=[],s=0;n>s;s+=4)o.push(r);n=i.create(o,n),t.concat(n)},unpad:function(t){t.sigBytes-=255&t.words[t.sigBytes-1>>>2]}},n.BlockCipher=a.extend({cfg:a.cfg.extend({mode:f,padding:l}),reset:function(){a.reset.call(this);var t=this.cfg,e=t.iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=t.createEncryptor;else n=t.createDecryptor,this._minBufferSize=1;this._mode=n.call(t,this,e&&e.words)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else e=this._process(!0),t.unpad(e);return e},blockSize:4});var p=n.CipherParams=o.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),f=(e.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext;return t=t.salt,(t?i.create([1398893684,1701076831]).concat(t).concat(e):e).toString(c)},parse:function(t){t=c.parse(t);var e=t.words;if(1398893684==e[0]&&1701076831==e[1]){var n=i.create(e.slice(2,4));e.splice(0,4),t.sigBytes-=16}return p.create({ciphertext:t,salt:n})}},d=n.SerializableCipher=o.extend({cfg:o.extend({format:f}),encrypt:function(t,e,n,r){r=this.cfg.extend(r);var o=t.createEncryptor(n,r);return e=o.finalize(e),o=o.cfg,p.create({ciphertext:e,key:n,iv:o.iv,algorithm:t,mode:o.mode,padding:o.padding,blockSize:t.blockSize,formatter:r.format})},decrypt:function(t,e,n,r){return r=this.cfg.extend(r),e=this._parse(e,r.format),t.createDecryptor(n,r).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),e=(e.kdf={}).OpenSSL={execute:function(t,e,n,r){return r||(r=i.random(8)),t=u.create({keySize:e+n}).compute(t,r),n=i.create(t.words.slice(e),4*n),t.sigBytes=4*e,p.create({key:t,iv:n,salt:r})}},y=n.PasswordBasedCipher=d.extend({cfg:d.cfg.extend({kdf:e}),encrypt:function(t,e,n,r){return r=this.cfg.extend(r),n=r.kdf.execute(n,t.keySize,t.ivSize),r.iv=n.iv,t=d.encrypt.call(this,t,e,n.key,r),t.mixIn(n),t},decrypt:function(t,e,n,r){return r=this.cfg.extend(r),e=this._parse(e,r.format),n=r.kdf.execute(n,t.keySize,t.ivSize,e.salt),r.iv=n.iv,d.decrypt.call(this,t,e,n.key,r)}})}(),function(){for(var t=r,e=t.lib.BlockCipher,n=t.algo,o=[],i=[],s=[],c=[],u=[],a=[],f=[],h=[],l=[],p=[],d=[],y=0;256>y;y++)d[y]=128>y?y<<1:y<<1^283;for(var v=0,g=0,y=0;256>y;y++){var m=g^g<<1^g<<2^g<<3^g<<4,m=m>>>8^255&m^99;o[v]=m,i[m]=v;var _=d[v],w=d[_],b=d[w],E=257*d[m]^16843008*m;s[v]=E<<24|E>>>8,c[v]=E<<16|E>>>16,u[v]=E<<8|E>>>24,a[v]=E,E=16843009*b^65537*w^257*_^16843008*v,f[m]=E<<24|E>>>8,h[m]=E<<16|E>>>16,l[m]=E<<8|E>>>24,p[m]=E,v?(v=_^d[d[d[b^_]]],g^=d[d[g]]):v=g=1}var x=[0,1,2,4,8,16,32,64,128,27,54],n=n.AES=e.extend({_doReset:function(){for(var t=this._key,e=t.words,n=t.sigBytes/4,t=4*((this._nRounds=n+6)+1),r=this._keySchedule=[],i=0;t>i;i++)if(n>i)r[i]=e[i];else{var s=r[i-1];i%n?n>6&&4==i%n&&(s=o[s>>>24]<<24|o[s>>>16&255]<<16|o[s>>>8&255]<<8|o[255&s]):(s=s<<8|s>>>24,s=o[s>>>24]<<24|o[s>>>16&255]<<16|o[s>>>8&255]<<8|o[255&s],s^=x[i/n|0]<<24),r[i]=r[i-n]^s}for(e=this._invKeySchedule=[],n=0;t>n;n++)i=t-n,s=n%4?r[i]:r[i-4],e[n]=4>n||4>=i?s:f[o[s>>>24]]^h[o[s>>>16&255]]^l[o[s>>>8&255]]^p[o[255&s]]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,s,c,u,a,o)},decryptBlock:function(t,e){var n=t[e+1];t[e+1]=t[e+3],t[e+3]=n,this._doCryptBlock(t,e,this._invKeySchedule,f,h,l,p,i),n=t[e+1],t[e+1]=t[e+3],t[e+3]=n},_doCryptBlock:function(t,e,n,r,o,i,s,c){for(var u=this._nRounds,a=t[e]^n[0],f=t[e+1]^n[1],h=t[e+2]^n[2],l=t[e+3]^n[3],p=4,d=1;u>d;d++)var y=r[a>>>24]^o[f>>>16&255]^i[h>>>8&255]^s[255&l]^n[p++],v=r[f>>>24]^o[h>>>16&255]^i[l>>>8&255]^s[255&a]^n[p++],g=r[h>>>24]^o[l>>>16&255]^i[a>>>8&255]^s[255&f]^n[p++],l=r[l>>>24]^o[a>>>16&255]^i[f>>>8&255]^s[255&h]^n[p++],a=y,f=v,h=g;y=(c[a>>>24]<<24|c[f>>>16&255]<<16|c[h>>>8&255]<<8|c[255&l])^n[p++],v=(c[f>>>24]<<24|c[h>>>16&255]<<16|c[l>>>8&255]<<8|c[255&a])^n[p++],g=(c[h>>>24]<<24|c[l>>>16&255]<<16|c[a>>>8&255]<<8|c[255&f])^n[p++],l=(c[l>>>24]<<24|c[a>>>16&255]<<16|c[f>>>8&255]<<8|c[255&h])^n[p++],t[e]=y,t[e+1]=v,t[e+2]=g,t[e+3]=l},keySize:8});t.AES=e._createHelper(n)}(),r.mode.ECB=function(){var t=r.lib.BlockCipherMode.extend();return t.Encryptor=t.extend({processBlock:function(t,e){this._cipher.encryptBlock(t,e)}}),t.Decryptor=t.extend({processBlock:function(t,e){this._cipher.decryptBlock(t,e)}}),t}()},function(t,e,n){function r(t){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this.id=t&&t.id||o.v4(),this.self=t&&t.self||null,this.other=t&&t.other||null,this.context=t&&t.context||{},this._send=t&&t.send||null,this._inbox=[],this._receivers=[]}var o=n(60),i=n(84).Promise;r.prototype.isConversation=!0,r.prototype.send=function(t){return this._send(this.other,{id:this.id,from:this.self,to:this.other,message:t})},r.prototype.deliver=function(t){if(this._receivers.length){var e=this._receivers.shift();e(t.message)}else this._inbox.push(t.message)},r.prototype.receive=function(){var t=this;return this._inbox.length?i.resolve(this._inbox.shift()):new i(function(e){t._receivers.push(e)})},t.exports=r},function(t,e){"use strict";function n(){this.next=null,this.previous=null}n.prototype.isBlock=!0,n.prototype.execute=function(t,e){throw new Error("Cannot run an abstract Block")},t.exports=n},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if("function"!=typeof t)throw new TypeError("Parameter callback must be a Function");this.callback=t}var o=n(84).Promise,i=n(92),s=n(94).isPromise;r.prototype=Object.create(i.prototype),r.prototype.constructor=r,r.prototype.isThen=!0,r.prototype.execute=function(t,e){var n=this,r=this.callback(e,t.context),i=s(r)?r:o.resolve(r);return i.then(function(t){return{result:t,block:n.next}})},i.prototype.then=function(t){if("function"==typeof t&&(t=new r(t)),!t||!t.isBlock)throw new TypeError("Parameter next must be a Block or function");return t.previous=this,this.next=t,t},t.exports=r},function(t,e){e.isPromise=function(t){return t&&"function"==typeof t.then&&"function"==typeof t["catch"]}},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this.message=t}var o=n(84).Promise,i=n(92),s=n(94).isPromise;n(93),n(96),r.prototype=Object.create(i.prototype),r.prototype.constructor=r,r.prototype.isTell=!0,r.prototype.execute=function(t,e){var n,r=this;if("function"==typeof this.message){var i=this.message(e,t.context);n=s(i)?i:o.resolve(i)}else n=o.resolve(this.message);return n.then(function(e){var n=t.send(e),i=s(n)?n:o.resolve(n);return i.then(function(){return{result:e,block:r.next}})})},i.prototype.tell=function(t){var e=new r(t);return this.then(e)},i.prototype.ask=function(t,e){return this.tell(t).listen(e)},t.exports=r},function(t,e,n){"use strict";function r(){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator")}var o=(n(84).Promise,n(92));n(93);r.prototype=Object.create(o.prototype),r.prototype.constructor=r,r.prototype.isListen=!0,r.prototype.execute=function(t,e){var n=this;return t.receive().then(function(t){return{result:t,block:n.next}})},o.prototype.listen=function(t){var e=new r,n=this.then(e);return t&&(n=n.then(t)),n},t.exports=r},function(t,e,n){"use strict";function r(t,e,n){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if("function"==typeof t?this.condition=t:t instanceof RegExp?this.condition=function(e,n){return t.test(e)}:this.condition=function(e,n){return e==t},e&&!e.isBlock)throw new TypeError("Parameter trueBlock must be a Block");if(n&&!n.isBlock)throw new TypeError("Parameter falseBlock must be a Block");this.trueBlock=e||null,this.falseBlock=n||null}var o=n(84).Promise,i=n(92),s=n(94).isPromise;n(93),r.prototype=Object.create(i.prototype),r.prototype.constructor=r,r.prototype.isIIf=!0,r.prototype.execute=function(t,e){var n=this,r=this.condition(e,t.context),i=s(r)?r:o.resolve(r);return i.then(function(t){var r=t?n.trueBlock||n.next:n.falseBlock;return{result:e,block:r}})},i.prototype.iif=function(t,e,n){var o=new r(t,e,n);return this.then(o)},t.exports=r},function(t,e,n){"use strict";function r(t,e){var n,o;if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if("function"==typeof t?(n=t,o=e):(n=null,o=t),n){if("function"!=typeof n)throw new TypeError("Parameter decision must be a function")}else n=function(t,e){return t};if(o&&"function"==typeof o)throw new TypeError("Parameter choices must be an object");if(this.decision=n,this.choices={},o){var i=this;Object.keys(o).forEach(function(t){i.addChoice(t,o[t])})}}var o=n(84).Promise,i=n(92),s=n(94).isPromise;n(93),r.prototype=Object.create(i.prototype),r.prototype.constructor=r,r.prototype.isDecision=!0,r.prototype.execute=function(t,e){var n=this,r=this.decision(e,t.context),i=s(r)?r:o.resolve(r);return i.then(function(t){var r=n.choices[t];if(r||(r=n.choices["default"]),!r)throw new Error('Block with id "'+t+'" not found');return{result:e,block:r}})},r.prototype.addChoice=function(t,e){if("string"!=typeof t)throw new TypeError("String expected as choice id");if(!e||!e.isBlock)throw new TypeError("Block expected as choice");if(t in this.choices)throw new Error('Choice with id "'+t+'" already exists');for(var n=e;n&&n.previous;)n=n.previous;return this.choices[t]=n,this},i.prototype.decide=function(t,e){var n=new r(t,e);return this.then(n)},t.exports=r},function(t,e){"use strict";function n(t,e){this.agent=t,this.stopPropagation=e&&e.stopPropagation||!1,this.receiveOriginal=t._receive,this.listeners=[]}n.prototype.type="pattern",n.prototype.receive=function(t,e){for(var n,r=[],o=0,i=this.listeners.length;i>o;o++){var s=this.listeners[o],c=s.pattern,u=c instanceof Function&&c(e)||c instanceof RegExp&&c.test(e)||c==e;if(u&&(n=s.callback.call(this.agent,t,e),r.push(n),this.stopPropagation))return r[0]}return n=this.receiveOriginal.call(this.agent,t,e),r.push(n),r[0]},n.prototype.listen=function(t,e){this.listeners.push({pattern:t,callback:e})},n.prototype.unlisten=function(t,e){for(var n=0,r=this.listeners.length;r>n;n++){var o=this.listeners[n];if(o.pattern===t&&o.callback===e){this.listeners.splice(n,1);break}}},n.prototype.mixin=function(){return{_receive:this.receive.bind(this),listen:this.listen.bind(this),unlisten:this.unlisten.bind(this)}},t.exports=n},function(t,e,n){"use strict";function r(t,e){this.agent=t,this.receiveOriginal=t._receive,this.timeout=e&&e.timeout||c,this.queue=[]}var o=n(12),i=n(2),s=n(13),c=6e4;r.prototype.type="request",r.prototype.receive=function(t,e){var n=this.agent;if("object"==typeof e){var r=e,o=this.queue[r.id];if(o)return clearTimeout(o.timeout),delete this.queue[r.id],r.error?o.reject(new Error(r.error)):o.resolve(r.message),!0;if("request"==e.type)try{var i=this.receiveOriginal.call(n,t,e.message);s.isPromise(i)?i.then(function(r){n.send(t,{type:"request",id:e.id,message:r})})["catch"](function(r){n.send(t,{type:"request",id:e.id,error:r.message||r.toString()})}):n.send(t,{type:"request",id:e.id,message:i})}catch(c){n.send(t,{type:"request",id:e.id,error:c.message||c.toString()})}}else this.receiveOriginal&&this.receiveOriginal.call(n,t,e)},r.prototype.request=function(t,e){var n=this;return new i(function(r,i){var s=o(),c={type:"request",id:s,message:e};n.queue[s]={resolve:r,reject:i,timeout:setTimeout(function(){delete n.queue[s],i(new Error("Timeout"))},n.timeout)},n.agent.send(t,c)["catch"](function(t){i(t)})})},r.prototype.mixin=function(){return{_receive:this.receive.bind(this),request:this.request.bind(this)}},t.exports=r},function(t,e,n){"use strict";function r(t,e,n){this.agent=t,this.receiveOriginal=t._receive,this.queue={},this.promiseTimeout=n&&n.timeout||1500,e instanceof Array?this.functionsFromArray(e):e instanceof Object?this.availableFunctions=e:console.log("cannot use RPC with the supplied functions",e)}var o=n(12),i=n(2),s=n(13);r.prototype.type="rpc",r.prototype.functionsFromArray=function(t){this.availableFunctions={};for(var e=0;e<t.length;e++){var n=t[e];this.availableFunctions[n]=this.agent[n]}},r.prototype.request=function(t,e){var n=this;return new i(function(r,i){"object"!=typeof e&&i(new TypeError("Message must be an object")),"2.0"!==e.jsonrpc&&(e.jsonrpc="2.0"),void 0===e.id&&(e.id=o()),void 0===e.method&&i(new Error('Property "method" expected')),void 0===e.params&&(e.params={}),n.queue[e.id]={resolve:r,reject:i,timeout:setTimeout(function(){delete n.queue[e.id],i(new Error("RPC Promise Timeout surpassed. Timeout: "+n.promiseTimeout/1e3+"s"))},n.promiseTimeout)};var c=n.agent.send(t,e);1==s.isPromise(c)&&c["catch"](function(t){i(t)})})},r.prototype.receive=function(t,e){"object"==typeof e&&"2.0"==e.jsonrpc?this._receive(t,e):this.receiveOriginal.call(this.agent,t,e)},r.prototype._receive=function(t,e){var n={jsonrpc:"2.0",id:e.id};if(void 0!==e.method){var r=this.availableFunctions[e.method];if(void 0!==r){var o=r.call(this.agent,e.params,t)||null;if(s.isPromise(o)){var i=this;o.then(function(e){n.result=e,i.agent.send(t,n)})["catch"](function(e){n.error=e.message||e.toString(),i.agent.send(t,n)})}else n.result=o,this.agent.send(t,n)}else{var c=new Error("Cannot find function: "+e.method);n.error=c.message||c.toString(),this.agent.send(t,n)}}else if(void 0!==e.result||void 0!==e.error){var u=this.queue[e.id];void 0!==u&&(void 0!=e.error?"object"==typeof e?u.reject(e.error):u.reject(new Error(e.error)):u.resolve(e.result))}else{var c=new Error("No method or result defined. Message:"+JSON.stringify(e));n.error=c.message||c.toString(),this.agent.send(t,n)}},r.prototype.mixin=function(){return{_receive:this.receive.bind(this),request:this.request.bind(this)}},t.exports=r},function(t,e){"use strict";function n(t){this.id=t&&t.id||null,this["default"]=t&&t["default"]||!1}n.prototype.type=null,n.prototype.connect=function(t,e){throw new Error('Cannot invoke abstract function "connect"')},n.prototype.close=function(){throw new Error('Cannot invoke abstract function "close"')},t.exports=n},function(t,e,n){"use strict";function r(t){this.id=t.id||null,this.url=t.url||t.host&&"amqp://"+t.host||null,this["default"]=t["default"]||!1,this.networkId=this.url,this.connection=null,this.config=t}var o=n(2),i=n(102),s=n(104);r.prototype=new i,r.prototype.type="amqp",r.prototype.connect=function(t,e){var r=n(!function(){var t=new Error('Cannot find module "amqplib/callback_api"');throw t.code="MODULE_NOT_FOUND",t}()),i=this,c=new o(function(t,e){null==i.connection?r.connect(i.url,function(e,n){null!=e?console.error(e):(i.connection=n,t())}):t()});return new s(i,t,e,c)},r.prototype.close=function(){null!=this.connection&&(this.connection.close(),this.connection=null)},t.exports=r},function(t,e,n){(function(e){"use strict";function r(t,e,n,r){this.transport=t,this.id=e,this.channel=null;var i=this;this.ready=new o(function(t,e){r.then(function(){i.transport.connection.createChannel(function(r,o){null!=r?(console.error(r),e()):(i.channel=o,o.assertQueue(i.id),o.consume(i.id,function(t){if(null!==t&&t.content&&""!=t.content.toString()){var e=JSON.parse(t.content.toString());e.to!=i.id?console.warn("Received message not meant for me?",e):n(e.from,e.message),o.ack(t)}}),t())})})})}var o=n(2);n(105);r.prototype.send=function(t,n){if(null!=this.channel){var r={from:this.id,to:t,message:n};this.channel.sendToQueue(t,new e(JSON.stringify(r),"utf-8"))}else console.log("No channel open")},r.prototype.close=function(){null!=this.channel&&this.channel.close(),this.channel=null},t.exports=r}).call(e,n(61).Buffer)},function(t,e,n){"use strict";function r(t,e,n){throw new Error("Cannot create an abstract Connection")}var o=n(2);r.prototype.ready=o.reject(new Error("Cannot get abstract property ready")),r.prototype.send=function(t,e){throw new Error("Cannot call abstract function send")},r.prototype.close=function(){throw new Error('Cannot call abstract function "close"')},t.exports=r},function(t,e,n){"use strict";function r(t){this.id=t&&t.id||null,this["default"]=t&&t["default"]||!1,this.host=t&&t.host||new o.Host(t),this.networkId=this.host.networkId}var o=n(107),i=n(102),s=n(108);r.prototype=new i,r.prototype.type="distribus",r.prototype.connect=function(t,e){return new s(this,t,e)},r.prototype.close=function(){this.host.close(),this.host=null},t.exports=r},function(t,n){t.exports=e},function(t,e,n){"use strict";function r(t,e,n){this.transport=t,this.id=e;var r=this.transport.host.create(e);r.on("message",n),this.ready=o.resolve(this)}var o=n(2);n(105);r.prototype.send=function(t,e){return this.transport.host.send(this.id,t,e)},r.prototype.close=function(){this.transport.host.remove(this.id)},t.exports=r},function(t,e,n){"use strict";function r(t){this.id=t&&t.id||null,this.networkId=null,this.agents={},this.outstandingRequests={},this.outstandingMessages={},this.url=t&&t.url||"http://127.0.0.1:3000/agents/:id",this.remoteUrl=t&&t.remoteUrl,this.localShortcut=t&&t.localShortcut===!1?!1:!0,this.httpTimeout=t&&t.httpTimeout||2e3,this.httpResponseTimeout=t&&t.httpResponseTimeout||200,this.regexHosts=/[http]{4}s?:\/\/([a-z\-\.A-Z0-9]*):?([0-9]*)(\/[a-z\/:A-Z0-9._\-% \\\(\)\*\+\.\^\$]*)/,this.urlHostData=this.regexHosts.exec(this.url),this.regexPath=this.getRegEx(this.urlHostData[3]),this.port=t&&t.port||this.urlHostData[2]||3e3,
this.path=this.urlHostData[3].replace(":id",""),"undefined"!=typeof window&&(this.send=this.webSend)}var o=n(110),i=n(2),s=n(102),c=n(111),u=n(12);r.prototype=new s,r.prototype.type="http",r.prototype.getRegEx=function(t){return new RegExp(t.replace(/[\\\(\)\*\+\.\^\$]/g,function(t){return"\\"+t}).replace(":id","([:a-zA-Z_0-9-]*)"))},r.prototype.connect=function(t,e){return void 0===this.server&&"undefined"==typeof window&&this.initiateServer(),this.outstandingRequests[t]={},this.outstandingMessages[t]={},new c(this,t,e)},r.prototype.send=function(t,e,n){var r=this;return new i(function(i,s){var c=r.regexHosts.exec(e),a=r.regexPath.exec(t),f=a[1],h=u();if(1==r.localShortcut){var l=r.regexPath.exec(e),p=l[1],d=c[3].replace(p,"");if(("127.0.0.1"==c[1]&&c[2]==r.urlHostData[2]&&d==r.path||r.urlHostData[1]==c[1]&&c[2]==r.urlHostData[2]&&d==r.path)&&void 0!==r.agents[p])return r.agents[p](f,n),void i()}if("object"==typeof n){var y=r.outstandingRequests[f];if(void 0!==y[n.id]){var v=y[n.id];return v.response.end(JSON.stringify(n)),clearTimeout(v.timeout),delete y[n.id],void i()}n=JSON.stringify(n)}var g={host:c[1],port:c[2],path:c[3],method:"POST",headers:{"x-eve-senderurl":t,"Content-type":"text/plain"}},m=o.request(g,function(t){t.setEncoding("utf8"),clearTimeout(r.outstandingMessages[f][h].timeout),t.on("data",function(t){var n;try{n=JSON.parse(t)}catch(o){n=t}return"object"==typeof n&&void 0!==n.__httpError__?void s(new Error(n.__httpError__)):(r.agents[f](e,n),void i())})});r.outstandingMessages[f][h]={timeout:setTimeout(function(){m.abort(),s(new Error("Cannot connect to "+e))},r.httpTimeout),reject:s},m.on("error",function(t){s(t)}),m.write(n),m.end()})},r.prototype.webSend=function(t,e,n){var r=this;return new i(function(o,i){"object"==typeof n&&(n=JSON.stringify(n));var s=r.regexPath.exec(t),c=s[1],u=new XMLHttpRequest;u.onreadystatechange=function(){if(4==u.readyState&&200==u.status){var t="";u.responseText.length>0&&(t=JSON.parse(u.responseText)),r.agents[c](e,t),o()}else 4==u.readyState&&i(new Error("http.status:"+u.status))},u.open("POST",e,!0),u.setRequestHeader("Content-Type","text/plain"),u.send(n)})},r.prototype.processRequest=function(t,e){var n=t.url,r={};r["Access-Control-Allow-Origin"]="*",r["Access-Control-Allow-Credentials"]=!0,r["Content-Type"]="text/plain";var o=this.regexPath.exec(n);if(null!==o){var i=o[1],s="unknown";void 0!==t.headers["x-eve-senderurl"]&&(s=t.headers["x-eve-senderurl"]);var c="";t.on("data",function(e){c+=e,c.length>3e7&&t.connection.destroy()});var u=this;t.on("end",function(){var t,n=!1;try{t=JSON.parse(c)}catch(o){t=c}n=t.jsonrpc&&"2.0"==t.jsonrpc||n,n=t.type&&"request"==t.type||n,e.writeHead(200,r);var a=u.agents[i];if(void 0===a){var f=new Error('Agent: "'+i+'" does not exist.');e.end(JSON.stringify({__httpError__:f.message||f.toString()}))}else 1==n?(u.outstandingRequests[i][t.id]={response:e,timeout:setTimeout(function(){e.end("timeout"),delete u.outstandingRequests[i][t.id]},u.httpResponseTimeout)},a(s,t)):(e.end(""),void 0!==a&&a(s,t))})}},r.prototype.initiateServer=function(){if(void 0===this.server){var t=this;this.server=o.createServer(function(e,n){if("OPTIONS"==e.method){var r={};r["Access-Control-Allow-Origin"]="*",r["Access-Control-Allow-Methods"]="POST, OPTIONS",r["Access-Control-Allow-Credentials"]=!0,r["Access-Control-Max-Age"]="86400",r["Access-Control-Allow-Headers"]="X-Requested-With, Access-Control-Allow-Origin, X-HTTP-Method-Override, Content-Type, Authorization, Accept",n.writeHead(200,r),n.end()}else"POST"==e.method&&t.processRequest(e,n)}),this.server.on("error",function(e){throw"EADDRINUSE"==e.code?new Error("ERROR: Could not start HTTP server. Port "+t.port+" is occupied."):new Error(e)}),this.server.listen(this.port,function(){console.log("Server listening at ",t.url)})}else this.server.close(),this.server=void 0,this.initiateServer()},r.prototype.close=function(){for(var t in this.outstandingRequests)if(this.outstandingRequests.hasOwnProperty(t)){var e=this.outstandingRequests[t];for(var n in e)if(e.hasOwnProperty(n)){var r=e[n],o=new Error("Server shutting down.");r.response.end(JSON.stringify({__httpError__:o.message||o.toString()}))}}this.server&&this.server.close(),this.server=null},t.exports=r},function(t,e){t.exports=r},function(t,e,n){"use strict";function r(t,e,n){if(this.transport=t,this.id=e,this.id in this.transport.agents)throw new Error("Agent with id "+e+" already exists");this.transport.agents[this.id]=n,this.ready=o.resolve(this)}var o=n(2);n(105);r.prototype.send=function(t,e){var n,r=this.transport.url.replace(":id",this.id),o=-1!==t.indexOf("://");return o?n=t:void 0!==this.transport.remoteUrl?n=this.transport.remoteUrl.replace(":id",t):console.log("ERROR: no remote URL specified. Cannot send over HTTP.",t),this.transport.send(r,n,e)},r.prototype.close=function(){delete this.transport.agents[this.id]},t.exports=r},function(t,e,n){"use strict";function r(t){this.id=t&&t.id||null,this.networkId=this.id||null,this["default"]=t&&t["default"]||!1,this.agents={}}var o=n(102),i=n(113);r.prototype=new o,r.prototype.type="local",r.prototype.connect=function(t,e){return new i(this,t,e)},r.prototype.close=function(){this.agents={}},t.exports=r},function(t,e,n){"use strict";function r(t,e,n){if(this.transport=t,this.id=e,this.id in this.transport.agents)throw new Error("Agent with id "+e+" already exists");this.transport.agents[this.id]=n,this.ready=o.resolve(this)}var o=n(2);n(105);r.prototype.send=function(t,e){var n=this.transport.agents[t];return n?(n(this.id,e),o.resolve()):o.reject(new Error("Agent with id "+t+" not found"))},r.prototype.close=function(){delete this.transport.agents[this.id]},t.exports=r},function(t,e,n){"use strict";function r(t){this.id=t.id||null,this.networkId=t.publish_key||null,this["default"]=t["default"]||!1,this.pubnub=o().init(t)}function o(){if("undefined"!=typeof window){if("undefined"==typeof window.PUBNUB)throw new Error("Please load pubnub first in the browser");return window.PUBNUB}return n(90)}var i=n(102),s=n(115);r.prototype=new i,r.prototype.type="pubnub",r.prototype.connect=function(t,e){return new s(this,t,e)},r.prototype.close=function(){this.pubnub=null},t.exports=r},function(t,e,n){"use strict";function r(t,e,n){this.id=e,this.transport=t;var r=this;this.ready=new o(function(o,i){t.pubnub.subscribe({channel:e,message:function(t){n(t.from,t.message)},connect:function(){o(r)}})})}var o=n(2);n(105);r.prototype.send=function(t,e){var n=this;return new o(function(r,o){n.transport.pubnub.publish({channel:t,message:{from:n.id,to:t,message:e},callback:r,error:o})})},r.prototype.close=function(){this.transport.pubnub.unsubscribe({channel:this.id})},t.exports=r},function(t,e,n){"use strict";function r(t){if(this.id=t&&t.id||null,this.networkId=this.id||null,this["default"]=t&&t["default"]||!1,this.localShortcut=t&&t.localShortcut===!1?!1:!0,this.reconnectDelay=t&&t.reconnectDelay||1e4,this.httpTransport=t&&t.httpTransport,this.url=t&&t.url||null,this.server=null,null!=this.url){var e=o.parse(this.url);if("ws:"!=e.protocol)throw new Error('Invalid protocol, "ws:" expected');if(-1==this.url.indexOf(":id"))throw new Error('":id" placeholder missing in url');this.address=e.protocol+"//"+e.host,this.ready=this._initServer(this.url)}else this.address=null,this.ready=s.resolve(this);this.agents={}}var o=n(117),i=n(12),s=n(2),c=n(13),u=n(102),a=n(122);r.prototype=new u,r.prototype.type="ws",r.prototype.getUrl=function(t){return this.url?this.url.replace(":id",t):null},r.prototype._initServer=function(t){var e=n(37).Server,r=o.parse(t),i=r.port||80,c=this;return new s(function(t,n){void 0!==c.httpTransport?(console.log("WEBSOCKETS: using available server."),c.server=new e({server:c.httpTransport.server},function(){t(c)})):c.server=new e({port:i},function(){t(c)}),c.server.on("connection",c._onConnection.bind(c)),c.server.on("error",function(t){n(t)})})},r.prototype._onConnection=function(t){var e=t.upgradeReq.url,n=o.parse(e,!0),r=n.pathname,s=c.normalizeURL(this.address+r),u=n.query,a=u.id||i(),f=this.agents[s];f?f._onConnection(a,t):t.close()},r.prototype.connect=function(t,e){var n=-1!==t.indexOf("://"),r=n?t:this.getUrl(t)||t;if(r&&(r=c.normalizeURL(r)),this.agents[r])throw new Error("Agent with id "+this.id+" already exists");var o=new a(this,r,e);return this.agents[o.url]=o,o},r.prototype.close=function(){for(var t in this.agents)this.agents.hasOwnProperty(t)&&this.agents[t].close();this.agents={},this.server&&this.server.close()},t.exports=r},function(t,e,n){function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(t,e,n){if(t&&a(t)&&t instanceof r)return t;var o=new r;return o.parse(t,e,n),o}function i(t){return u(t)&&(t=o(t)),t instanceof r?t.format():r.prototype.format.call(t)}function s(t,e){return o(t,!1,!0).resolve(e)}function c(t,e){return t?o(t,!1,!0).resolveObject(e):e}function u(t){return"string"==typeof t}function a(t){return"object"==typeof t&&null!==t}function f(t){return null===t}function h(t){return null==t}var l=n(118);e.parse=o,e.resolve=s,e.resolveObject=c,e.format=i,e.Url=r;var p=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/,y=["<",">",'"',"`"," ","\r","\n","	"],v=["{","}","|","\\","^","`"].concat(y),g=["'"].concat(v),m=["%","/","?",";","#"].concat(g),_=["/","?","#"],w=255,b=/^[a-z0-9A-Z_-]{0,63}$/,E=/^([a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:!0,"javascript:":!0},k={javascript:!0,"javascript:":!0},S={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},O=n(119);r.prototype.parse=function(t,e,n){if(!u(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t;r=r.trim();var o=p.exec(r);if(o){o=o[0];var i=o.toLowerCase();this.protocol=i,r=r.substr(o.length)}if(n||o||r.match(/^\/\/[^@\/]+@[^@\/]+/)){var s="//"===r.substr(0,2);!s||o&&k[o]||(r=r.substr(2),this.slashes=!0)}if(!k[o]&&(s||o&&!S[o])){for(var c=-1,a=0;a<_.length;a++){var f=r.indexOf(_[a]);-1!==f&&(-1===c||c>f)&&(c=f)}var h,d;d=-1===c?r.lastIndexOf("@"):r.lastIndexOf("@",c),-1!==d&&(h=r.slice(0,d),r=r.slice(d+1),this.auth=decodeURIComponent(h)),c=-1;for(var a=0;a<m.length;a++){var f=r.indexOf(m[a]);-1!==f&&(-1===c||c>f)&&(c=f)}-1===c&&(c=r.length),this.host=r.slice(0,c),r=r.slice(c),this.parseHost(),this.hostname=this.hostname||"";var y="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!y)for(var v=this.hostname.split(/\./),a=0,A=v.length;A>a;a++){var T=v[a];if(T&&!T.match(b)){for(var B="",C=0,P=T.length;P>C;C++)B+=T.charCodeAt(C)>127?"x":T[C];if(!B.match(b)){var I=v.slice(0,a),R=v.slice(a+1),j=T.match(E);j&&(I.push(j[1]),R.unshift(j[2])),R.length&&(r="/"+R.join(".")+r),this.hostname=I.join(".");break}}}if(this.hostname.length>w?this.hostname="":this.hostname=this.hostname.toLowerCase(),!y){for(var M=this.hostname.split("."),U=[],a=0;a<M.length;++a){var L=M[a];U.push(L.match(/[^A-Za-z0-9_-]/)?"xn--"+l.encode(L):L)}this.hostname=U.join(".")}var N=this.port?":"+this.port:"",D=this.hostname||"";this.host=D+N,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==r[0]&&(r="/"+r))}if(!x[i])for(var a=0,A=g.length;A>a;a++){var z=g[a],F=encodeURIComponent(z);F===z&&(F=escape(z)),r=r.split(z).join(F)}var q=r.indexOf("#");-1!==q&&(this.hash=r.substr(q),r=r.slice(0,q));var H=r.indexOf("?");if(-1!==H?(this.search=r.substr(H),this.query=r.substr(H+1),e&&(this.query=O.parse(this.query)),r=r.slice(0,H)):e&&(this.search="",this.query={}),r&&(this.pathname=r),S[i]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var N=this.pathname||"",L=this.search||"";this.path=N+L}return this.href=this.format(),this},r.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,i="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&a(this.query)&&Object.keys(this.query).length&&(i=O.stringify(this.query));var s=this.search||i&&"?"+i||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||S[e])&&o!==!1?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),s=s.replace("#","%23"),e+o+n+s+r},r.prototype.resolve=function(t){return this.resolveObject(o(t,!1,!0)).format()},r.prototype.resolveObject=function(t){if(u(t)){var e=new r;e.parse(t,!1,!0),t=e}var n=new r;if(Object.keys(this).forEach(function(t){n[t]=this[t]},this),n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol)return Object.keys(t).forEach(function(e){"protocol"!==e&&(n[e]=t[e])}),S[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n;if(t.protocol&&t.protocol!==n.protocol){if(!S[t.protocol])return Object.keys(t).forEach(function(e){n[e]=t[e]}),n.href=n.format(),n;if(n.protocol=t.protocol,t.host||k[t.protocol])n.pathname=t.pathname;else{for(var o=(t.pathname||"").split("/");o.length&&!(t.host=o.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==o[0]&&o.unshift(""),o.length<2&&o.unshift(""),n.pathname=o.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var i=n.pathname||"",s=n.search||"";n.path=i+s}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var c=n.pathname&&"/"===n.pathname.charAt(0),a=t.host||t.pathname&&"/"===t.pathname.charAt(0),l=a||c||n.host&&t.pathname,p=l,d=n.pathname&&n.pathname.split("/")||[],o=t.pathname&&t.pathname.split("/")||[],y=n.protocol&&!S[n.protocol];if(y&&(n.hostname="",n.port=null,n.host&&(""===d[0]?d[0]=n.host:d.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===o[0]?o[0]=t.host:o.unshift(t.host)),t.host=null),l=l&&(""===o[0]||""===d[0])),a)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,d=o;else if(o.length)d||(d=[]),d.pop(),d=d.concat(o),n.search=t.search,n.query=t.query;else if(!h(t.search)){if(y){n.hostname=n.host=d.shift();var v=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;v&&(n.auth=v.shift(),n.host=n.hostname=v.shift())}return n.search=t.search,n.query=t.query,f(n.pathname)&&f(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!d.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var g=d.slice(-1)[0],m=(n.host||t.host)&&("."===g||".."===g)||""===g,_=0,w=d.length;w>=0;w--)g=d[w],"."==g?d.splice(w,1):".."===g?(d.splice(w,1),_++):_&&(d.splice(w,1),_--);if(!l&&!p)for(;_--;_)d.unshift("..");!l||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift(""),m&&"/"!==d.join("/").substr(-1)&&d.push("");var b=""===d[0]||d[0]&&"/"===d[0].charAt(0);if(y){n.hostname=n.host=b?"":d.length?d.shift():"";var v=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;v&&(n.auth=v.shift(),n.host=n.hostname=v.shift())}return l=l||n.host&&d.length,l&&!b&&d.unshift(""),d.length?n.pathname=d.join("/"):(n.pathname=null,n.path=null),f(n.pathname)&&f(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var t=this.host,e=d.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,n){var r;(function(t,o){!function(i){function s(t){throw RangeError(I[t])}function c(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function u(t,e){var n=t.split("@"),r="";n.length>1&&(r=n[0]+"@",t=n[1]),t=t.replace(P,".");var o=t.split("."),i=c(o,e).join(".");return r+i}function a(t){for(var e,n,r=[],o=0,i=t.length;i>o;)e=t.charCodeAt(o++),e>=55296&&56319>=e&&i>o?(n=t.charCodeAt(o++),56320==(64512&n)?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),o--)):r.push(e);return r}function f(t){return c(t,function(t){var e="";return t>65535&&(t-=65536,e+=M(t>>>10&1023|55296),t=56320|1023&t),e+=M(t)}).join("")}function h(t){return 10>t-48?t-22:26>t-65?t-65:26>t-97?t-97:b}function l(t,e){return t+22+75*(26>t)-((0!=e)<<5)}function p(t,e,n){var r=0;for(t=n?j(t/S):t>>1,t+=j(t/e);t>R*x>>1;r+=b)t=j(t/R);return j(r+(R+1)*t/(t+k))}function d(t){var e,n,r,o,i,c,u,a,l,d,y=[],v=t.length,g=0,m=A,_=O;for(n=t.lastIndexOf(T),0>n&&(n=0),r=0;n>r;++r)t.charCodeAt(r)>=128&&s("not-basic"),y.push(t.charCodeAt(r));for(o=n>0?n+1:0;v>o;){for(i=g,c=1,u=b;o>=v&&s("invalid-input"),a=h(t.charCodeAt(o++)),(a>=b||a>j((w-g)/c))&&s("overflow"),g+=a*c,l=_>=u?E:u>=_+x?x:u-_,!(l>a);u+=b)d=b-l,c>j(w/d)&&s("overflow"),c*=d;e=y.length+1,_=p(g-i,e,0==i),j(g/e)>w-m&&s("overflow"),m+=j(g/e),g%=e,y.splice(g++,0,m)}return f(y)}function y(t){var e,n,r,o,i,c,u,f,h,d,y,v,g,m,_,k=[];for(t=a(t),v=t.length,e=A,n=0,i=O,c=0;v>c;++c)y=t[c],128>y&&k.push(M(y));for(r=o=k.length,o&&k.push(T);v>r;){for(u=w,c=0;v>c;++c)y=t[c],y>=e&&u>y&&(u=y);for(g=r+1,u-e>j((w-n)/g)&&s("overflow"),n+=(u-e)*g,e=u,c=0;v>c;++c)if(y=t[c],e>y&&++n>w&&s("overflow"),y==e){for(f=n,h=b;d=i>=h?E:h>=i+x?x:h-i,!(d>f);h+=b)_=f-d,m=b-d,k.push(M(l(d+_%m,0))),f=j(_/m);k.push(M(l(f,0))),i=p(n,g,r==o),n=0,++r}++n,++e}return k.join("")}function v(t){return u(t,function(t){return B.test(t)?d(t.slice(4).toLowerCase()):t})}function g(t){return u(t,function(t){return C.test(t)?"xn--"+y(t):t})}var m=("object"==typeof e&&e&&!e.nodeType&&e,"object"==typeof t&&t&&!t.nodeType&&t,"object"==typeof o&&o);(m.global===m||m.window===m||m.self===m)&&(i=m);var _,w=2147483647,b=36,E=1,x=26,k=38,S=700,O=72,A=128,T="-",B=/^xn--/,C=/[^\x20-\x7E]/,P=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=b-E,j=Math.floor,M=String.fromCharCode;_={version:"1.3.2",ucs2:{decode:a,encode:f},decode:d,encode:y,toASCII:g,toUnicode:v},r=function(){return _}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))}(this)}).call(e,n(85)(t),function(){return this}())},function(t,e,n){"use strict";e.decode=e.parse=n(120),e.encode=e.stringify=n(121)},function(t,e){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,r,o){e=e||"&",r=r||"=";var i={};if("string"!=typeof t||0===t.length)return i;var s=/\+/g;t=t.split(e);var c=1e3;o&&"number"==typeof o.maxKeys&&(c=o.maxKeys);var u=t.length;c>0&&u>c&&(u=c);for(var a=0;u>a;++a){var f,h,l,p,d=t[a].replace(s,"%20"),y=d.indexOf(r);y>=0?(f=d.substr(0,y),h=d.substr(y+1)):(f=d,h=""),l=decodeURIComponent(f),p=decodeURIComponent(h),n(i,l)?Array.isArray(i[l])?i[l].push(p):i[l]=[i[l],p]:i[l]=p}return i}},function(t,e){"use strict";var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,r,o){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map(function(o){var i=encodeURIComponent(n(o))+r;return Array.isArray(t[o])?t[o].map(function(t){return i+encodeURIComponent(n(t))}).join(e):i+encodeURIComponent(n(t[o]))}).join(e):o?encodeURIComponent(n(o))+r+encodeURIComponent(n(t)):""}},function(t,e,n){"use strict";function r(t,e,n){this.transport=t,this.url=e?c.normalizeURL(e):o(),this.receive=n,this.sockets={},this.closed=!1,this.reconnectTimers={},this.ready=i.resolve(this)}var o=n(12),i=n(2),s="undefined"!=typeof window&&"undefined"!=typeof window.WebSocket?window.WebSocket:n(37),c=n(13);n(105);r.prototype.send=function(t,e){if(this.transport.localShortcut){var n=this.transport.agents[t];if(n)try{return n.receive(this.url,e),i.resolve()}catch(r){return i.reject(r)}}var o=this.sockets[t];if(o)try{if(o.readyState==o.CONNECTING)return new i(function(t,n){o.onopen.callbacks.push(function(){o.send(JSON.stringify(e)),t()})});if(o.readyState==o.OPEN)return o.send(JSON.stringify(e)),i.resolve();o=null}catch(r){return i.reject(r)}if(!o){var s=this;return new i(function(n,r){s._connect(t,function(t){t.send(JSON.stringify(e)),n()},function(e){r(new Error('Failed to connect to agent "'+t+'"'))})})}},r.prototype.connect=function(t){var e=this;return new i(function(n,r){e._connect(t,function(){n(e)},r)})},r.prototype._connect=function(t,e,n,r){var o=this,i=new s(t+"?id="+this.url);return o.sockets[t]=i,i.onopen=function(){r=!0,i.onopen.callbacks.forEach(function(t){t(i)}),i.onopen.callbacks=[]},i.onopen.callbacks=e?[e]:[],i.onmessage=function(e){o.receive(t,JSON.parse(e.data))},i.onclose=function(){delete o.sockets[t],r&&o._reconnect(t)},i.onerror=function(e){delete o.sockets[t],n&&n(e)},i},r.prototype._reconnect=function(t){var e=this,n=!0;0==e.closed&&null==e.reconnectTimers[t]&&(e.reconnectTimers[t]=setTimeout(function(){delete e.reconnectTimers[t],e._connect(t,null,null,n)},e.transport.reconnectDelay))},r.prototype._onConnection=function(t,e){var n=this;return e.onmessage=function(e){n.receive(t,JSON.parse(e.data))},e.onclose=function(){delete n.sockets[t]},e.onerror=function(e){delete n.sockets[t]},this.sockets[t]&&this.sockets[t].close(),this.sockets[t]=e,e},r.prototype.list=function(){return Object.keys(this.sockets)},r.prototype.close=function(){this.closed=!0;for(var t in this.sockets)this.sockets.hasOwnProperty(t)&&this.sockets[t].close();this.sockets={},delete this.transport.agents[this.url]},t.exports=r}])});
//# sourceMappingURL=eve.map